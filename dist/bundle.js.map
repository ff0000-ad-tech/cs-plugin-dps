{"version":3,"file":"bundle.js","sources":["webpack:///bundle.js"],"sourcesContent":["!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=30)}([function(e,t,n){\"use strict\";t.__esModule=!0,t.TextUtils=t.ObjectUtils=t.MonetUtils=t.MathUtils=t.ImageUtils=t.DcsUtils=t.ColorUtils=t.ArrayUtils=t.MotionUtils=t.LocationUtils=void 0;var r=h(n(40));t.LocationUtils=r.default;var i=h(n(41));t.MotionUtils=i.default;var a=p(n(42));t.ArrayUtils=a;var o=p(n(43));t.ColorUtils=o;var s=p(n(44));t.DcsUtils=s;var l=p(n(45));t.ImageUtils=l;var c=p(n(46));t.MathUtils=c;var u=p(n(47));t.MonetUtils=u;var d=p(n(48));t.ObjectUtils=d;var f=p(n(49));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}t.TextUtils=f},function(e,t,n){\"use strict\";t.__esModule=!0,t.Vector2D=t.SimpleNoise2D=t.ParentTransform=t.Matrix3D=t.Matrix2D=void 0;var r=l(n(19));t.Matrix2D=r.default;var i=l(n(38));t.Matrix3D=i.default;var a=l(n(39));t.ParentTransform=a.default;var o=l(n(50));t.SimpleNoise2D=o.default;var s=l(n(20));function l(e){return e&&e.__esModule?e:{default:e}}t.Vector2D=s.default},function(e,t,n){\"use strict\";t.__esModule=!0,t.mix=void 0;t.mix=function(e){return new r(e)};var r=function(){function e(e){this.superclass=e}return e.prototype.with=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)},e}()},function(e,t,n){\"use strict\";t.__esModule=!0,t.LoaderBase=void 0;t.LoaderBase=function(e){return function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},o=function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(t);return o.onComplete=a.onComplete||function(){},o.onFail=a.onFail||function(){},o.onProgress=a.onProgress||function(){},o.name=a.name||\"\",o.scope=a.scope||o,o.dataRaw,o.cacheBuster=a.cacheBuster||!1,o._failCalled=!1,t}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype._handleFail=function(){var e=this;e._failCalled||(e._failCalled=!0,e.onFail.call(e.scope,e),console.log('Loader \"'+e.name+'\" Fail:',e.url))},t}(e)}},function(e,t,n){\"use strict\";t.__esModule=!0,t.createXMLHttpRequest=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject(\"Msxml2.XMLHTTP\")}catch(e){}return console.warn(\"XMLHttpRequest not supported\"),null},t.getFileName=function(e){var t=e.lastIndexOf(\".\"),n=e.lastIndexOf(\"/\")+1;n>t&&(t=void 0);return e.substring(n,t)},t.getFontName=function(e){return e.substring(e.lastIndexOf(\"/\")+1,e.indexOf(\".\"))},t.getFileType=function(e){var t=(e=e||\"\").indexOf(\"?\");t>-1&&(e=e.substr(0,t));var n=e.match(/[^\\\\]*\\.(\\w+)$/),r=e.match(/image\\/(jpeg|jpg|png)/);return n?n[1]:r?r[1]:\"unknown\"},t.getFullUrl=function(e,t,n){var a=i(e),o=(0,r.matchProtocolTo)(a+_file);n&&(o=n(o));return url},t.getUrlPrepend=i,t.getParamsFromData=function(e){if(\"string\"==typeof e)return e;var t=\"\";for(var n in e)console.log(\"      prop =\",n),t+=n+\"=\"+e[n]+\"&\";return t.substr(0,t.length-1)};var r=n(22);function i(e){return e?e.replace(/\\/?$/,\"/\"):\"\"}},function(e,t,n){\"use strict\";t.__esModule=!0,t.LoaderSource=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(4)),i=n(22);t.LoaderSource=function(e){return function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t=e.call.apply(e,[this].concat(a))||this;var s=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},l=function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(t);return l.url=(0,i.matchProtocolTo)(arguments[0]||\"\"),s.platformGetUrl&&(l.platformGetUrl=s.platformGetUrl,l.url=s.platformGetUrl(l.url)),l.fileName=void 0===s.id?r.getFileName(l.url):s.id,l.fileType=s.fileType||r.getFileType(l.url),t}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t}(e)}},function(e,t,n){\"use strict\";t.__esModule=!0,t.setCss=function(e,t){e=r.get(e);var n={};if(arguments.length>2)for(var a=1;a<arguments.length;a+=2)n=i.CssManager.conformCssKeyValue(arguments[a],arguments[a+1]);else n=\"string\"==typeof arguments[1]?i.CssManager.conformCssString(arguments[1],e):i.CssManager.conformCssObject(arguments[1],e);i.CssManager.apply(e,n)},t.getCss=function(e,t){var n;if(e=r.get(e),\"x\"==t||\"y\"==t){var a=e.style[i.CssManager.getDeviceKey(\"transform\")],o=a.replace(/[\\s\\(\\)matrix]/g,\"\").split(\",\");n=o.length<6?0:+o[\"x\"==t?4:5]}else{var s=window.getComputedStyle(e,null);n=s.getPropertyValue(t).replace(/px/,\"\"),isNaN(n)||(n=parseInt(n,10))}return n},t.injectStylesheet=function(e,t){if(document.getElementById(e))return;var n=document.createElement(\"style\");n.type=\"text/css\",n.id=e;var r=2===arguments.length?t:\"\";if(arguments.length>2)for(var i=0;i<arguments.length-1;i+=2){var a=arguments[i+1].replace(/\\,\\s+/g,\",\");r+=a,r+=\" { \"+(arguments[i+2]||\"\")+\" }\\n\"}n.innerHTML=r,document.getElementsByTagName(\"head\")[0].appendChild(n)},t.addClass=function(e,t){for(var n=r.get(e),i=0;i<arguments.length-1;i++)n.classList.add(arguments[i+1])},t.removeClass=function(e,t){r.get(e).classList.remove(t)};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(7)),i=n(9)},function(e,t,n){\"use strict\";function r(e,t){if(\"string\"!=typeof e)return e;switch(t=t||document,(e=e.trim())[0]){case\"#\":return t.getElementById(e.slice(1));case\".\":return t.getElementsByClassName(e.slice(1));case\"<\":return t.getElementsByTagName(e.slice(1,e.length-1));default:return t.getElementById(e)}}t.__esModule=!0,t.get=r,t.getElement=function(e,t){return r(e,t)},t.removeChildren=function(e){var t=r(e);console.log(\"removeChildren (\"+e+\")\");for(;t.firstChild;)t.removeChild(t.firstChild)},t.addiFrame=function(e){var t=document.createElement(\"iFrame\");return t.id=e.id,t.width=e.css.width,t.height=e.css.height,delete e.css.width,delete e.css.height,t.setAttribute(\"src\",e.source),t.setAttribute(\"frameborder\",\"0\"),t.setAttribute(\"scrolling\",\"no\"),t.setAttribute(\"allowfullscreen\",\"\"),applyContainerCss(t,e),e.target.appendChild(t),t},t.addSvg=function(e){var t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");t.setAttribute(\"height\",e.height),t.setAttribute(\"width\",e.width);var n=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");n.setAttribute(\"d\",e.d),n.setAttribute(\"fill\",e.fill),void 0!=e.stroke&&n.setAttribute(\"stroke\",e.stroke);void 0!=e.strokeWidth&&n.setAttribute(\"stroke-width\",e.strokeWidth);return t.appendChild(n),applyContainerCss(t,e),e.target.appendChild(t),t},t.applyToElements=function(e){var t;if(void 0===e.elements.length)e.method.call(e.scope,e.elements,e.methodArg);else for(t=0;t<e.elements.length;t++){var n=e.elements[t];e.method.call(e.scope,n,e.methodArg)}}},function(e,t,n){\"use strict\";t.__esModule=!0,t.get=t.set=void 0;var r={debug:!1,imagePaths:[],loadedImageNames:[],emitterDataFiles:[],emitterDataPath:\"js\",imagePath:\"images\",adPath:\"\",adWidth:\"\",adHeight:\"\",fps:60};t.set=function(e,t){e in r?r[e]=t:console.error(\"Can't set an undefined key in setting: \"+e)};t.get=function(e){return r[e]}},function(e,t,n){\"use strict\";t.__esModule=!0,t.SheetManager=t.ImageManager=t.Expandable=t.Core=t.ExpandableDcs=t.CssManager=void 0;var r=u(n(18));t.CssManager=r.default;var i=u(n(51));t.ExpandableDcs=i.default;var a=c(n(52));t.Core=a;var o=c(n(58));t.Expandable=o;var s=c(n(21));t.ImageManager=s;var l=c(n(68));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}t.SheetManager=l},function(e,t,n){\"use strict\";t.__esModule=!0,t.Device=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(37));t.Device=r.default},function(e,t){var n;n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){\"use strict\";t.__esModule=!0,t.Markup=t.Styles=t.Align=t.Clamp=t.Effects=t.Ratio=t.FullScreen=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(60));t.FullScreen=r.default;var i=u(n(61));t.Ratio=i;var a=u(n(62));t.Effects=a;var o=u(n(63));t.Clamp=o;var s=u(n(64));t.Align=s;var l=u(n(6));t.Styles=l;var c=u(n(7));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}t.Markup=c},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(1),a=s(n(14)),o=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}var l=0,c=function(e,t){var n=this;n.graphic=e,n.originalProperties=t||{},n.defaultProperties={},n.properties=n.originalProperties,n.setDefaultProperties=function(e){n.defaultProperties=e,n.properties=r.ObjectUtils.defaults(n.originalProperties,e,!0)},n.generateIndividualProperties=function(){var e=a.default,t=function(t){return e.randomNumInRange(t.value,t.range)},r=n.properties,o=i.Vector2D.degreeToVector(t(r.velocityAngle)),s=t(r.scale),c=t(r.speed),u=e.randomVectorInRange(r.origin.value,r.origin.range,r.origin.shape),d={id:l,lifeSpan:t(r.lifeSpan),location:u,velocity:o.mult(c),turbulence:r.turbulence,maxSpeed:r.maxSpeed,acceleration:r.acceleration,bounceAmount:r.bounceAmount,bodySize:n._getBodySize(s),style:{x:location.x,y:location.y,alpha:t(r.alpha),scale:s,rotation:t(r.rotation),transformOrigin:r.transformOrigin,color:a.default.randomArrayInRange(r.color.value,r.color.range)},animations:r.animations};return l++,d},n._getBodySize=function(e){return void 0!==n.properties.bodySize?n.properties.bodySize*e:n.graphic instanceof o.default.Circle?n.graphic.width*e:Math.max(n.graphic.width,n.graphic.height)*e*.5}};t.default=c},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(1),a={easyTween:function(e,t,n){var i={};for(var a in e){var o,s=e[a],l=s.steps,c=\"max\"===s.duration?t:s.duration||t,u=s.loop?n%c/c:n/c;for(u=r.MathUtils.restrict(u,0,1),o=0;o<l.length-1;o++){var d=l[o],f=l[o+1];if(r.MathUtils.inRange(u,d.s,f.s)){var p=r.MathUtils.rel(d.v,f.v,d.s,f.s,u);i[a]=p;break}}}return i},randomNumInRange:function(e,t,n){return t?(n=n||.01,e+r.MathUtils.random(-t/2,t/2,n)):e},randomArrayInRange:function(e,t,n){n=n||.01;var r,i=[];for(r=0;r<e.length;r++)i.push(this.randomNumInRange(e[r],t[r],n));return i},randomVectorInRange:function(e,t,n){var a=new i.Vector2D(e.x,e.y),o=t.x/2,s=t.y/2;switch(n){case\"rect\":var l=r.MathUtils.random(-o,o,.01),c=r.MathUtils.random(-s,s,.01);u=new i.Vector2D(l,c);break;case\"oval\":default:var u;(u=i.Vector2D.random()).x*=o*Math.random(),u.y*=s*Math.random()}return a.add(u),a},secToFrameCount:function(e,t){return~~(e*t)},frameCountToSec:function(e,t){return e/t}};t.default=a},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r,i,a=n(0);function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var s={DEFAULTSIZE:10,DEFAULTSTYLE:{x:0,y:0,alpha:1,scale:1,rotation:0,transformOrigin:{x:.5,y:.5},color:[255,0,0],strokeWidth:0,strokeColor:\"rgba(0, 0, 0, 1)\"}};s.Shape=(i=r=function(){function e(){this.hasPath=!0}return e.prototype.render=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=0),(t=a.ObjectUtils.defaults(t,this.style)).scale=a.MathUtils.restrict(t.scale,0,1/0),t.alpha=a.MathUtils.restrict(t.alpha,0,1);var r=this.width*t.scale,i=this.height*t.scale;if(t.color=s.Shape.getRGBA(t.color,t.alpha),e.save(),t.alpha<1&&!this.hasPath&&(e.globalAlpha=t.alpha),e.translate(r*-t.transformOrigin.x,i*-t.transformOrigin.y),0!==t.rotation){var o=t.x+r*t.transformOrigin.x,l=t.y+i*t.transformOrigin.y;e.translate(o,l),e.rotate(a.MathUtils.toRadians(t.rotation)),e.translate(-o,-l)}this.hasPath&&e.beginPath(),this.draw(e,t,r,i,n),this.hasPath&&(e.closePath(),e.fillStyle=t.color,e.fill(),t.strokeWidth>0&&(e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.stroke())),e.restore()},e}(),Object.defineProperty(r,\"getRGBA\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){return\"rgba(\"+~~a.MathUtils.restrict(e[0],0,255)+\",\"+~~a.MathUtils.restrict(e[1],0,255)+\",\"+~~a.MathUtils.restrict(e[2],0,255)+\",\"+a.MathUtils.restrict(t,0,1)+\")\"}}),i),s.Image=function(e){function t(t,n,r){var i;return void 0===n&&(n=t.width),void 0===r&&(r={}),(i=e.call(this)||this).hasPath=!1,i.image=t,i.width=n,i.height=i.width*(t.height/t.width),i.style=a.ObjectUtils.defaults(r,s.DEFAULTSTYLE),i}return o(t,e),t.prototype.draw=function(e,t,n,r){e.drawImage(this.image,t.x,t.y,n,r)},t}(s.Shape),s.Circle=function(e){function t(t,n){var r;return void 0===t&&(t=s.DEFAULTSIZE),void 0===n&&(n={}),(r=e.call(this)||this).width=.5*t,r.height=r.width,r.style=a.ObjectUtils.defaults(n,s.DEFAULTSTYLE),r}return o(t,e),t.prototype.draw=function(e,t,n){e.arc(t.x+.5*n,t.y+.5*n,n,0,2*Math.PI)},t}(s.Shape),s.Rect=function(e){function t(t,n,r){var i;return void 0===t&&(t=s.DEFAULTSIZ),void 0===n&&(n=s.DEFAULTSIZ),void 0===r&&(r={}),(i=e.call(this)||this).width=t,i.height=n,i.style=a.ObjectUtils.defaults(r,s.DEFAULTSTYLE),i}return o(t,e),t.prototype.draw=function(e,t,n,r){e.rect(t.x,t.y,n,r)},t}(s.Shape),s.Sprite=function(e){function t(t,n,r,i){var o;return void 0===r&&(r={}),(o=e.call(this)||this).hasPath=!1,o.setting=i,o.image=t,o.oriWidth=t.width,o.oriHeight=t.height,o.width=n||o.oriWidth,o.height=o.width*(o.setting.frameWidth/o.setting.frameHeight),o.style=a.ObjectUtils.defaults(r,s.DEFAULTSTYLE),o.frameLen=~~(1/o.setting.speed),o.colNumber=o.oriWidth/o.setting.frameWidth,o}return o(t,e),t.prototype.draw=function(e,t,n,r,i){var a=~~(i/this.frameLen);if(this.setting.loop)a%=this.setting.frameNumber;else{var o=this.setting.frameNumber-1;a=a>o?o:a}var s=this.setting.frameWidth,l=this.setting.frameHeight,c=n/s,u=a*this.setting.frameWidth%this.oriWidth,d=~~(a/this.colNumber)*this.setting.frameHeight;e.drawImage(this.image,u,d,s,l,t.x,t.y,s*c,l*c)},t}(s.Shape);var l=s;t.default=l},function(e,t,n){var r;\"undefined\"!=typeof window?r=window:\"undefined\"!=typeof self?r=self:(console.warn(\"Using browser-only version of superagent in non-browser environment\"),r=this);var i=n(32),a=n(33),o=n(17),s=n(34),l=n(36);function c(){}var u=t=e.exports=function(e,n){return\"function\"==typeof n?new t.Request(\"GET\",e).end(n):1==arguments.length?new t.Request(\"GET\",e):new t.Request(e,n)};t.Request=_,u.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&\"file:\"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject(\"Microsoft.XMLHTTP\")}catch(e){}try{return new ActiveXObject(\"Msxml2.XMLHTTP.6.0\")}catch(e){}try{return new ActiveXObject(\"Msxml2.XMLHTTP.3.0\")}catch(e){}try{return new ActiveXObject(\"Msxml2.XMLHTTP\")}catch(e){}throw Error(\"Browser-only version of superagent could not find XHR\")};var d=\"\".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\\s*|\\s*$)/g,\"\")};function f(e){if(!o(e))return e;var t=[];for(var n in e)p(t,n,e[n]);return t.join(\"&\")}function p(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){p(e,t,n)});else if(o(n))for(var r in n)p(e,t+\"[\"+r+\"]\",n[r]);else e.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function h(e){for(var t,n,r={},i=e.split(\"&\"),a=0,o=i.length;a<o;++a)-1==(n=(t=i[a]).indexOf(\"=\"))?r[decodeURIComponent(t)]=\"\":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function m(e){return/[\\/+]json($|[^-\\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text=\"HEAD\"!=this.req.method&&(\"\"===this.xhr.responseType||\"text\"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,a=e.split(/\\r?\\n/),o={},s=0,l=a.length;s<l;++s)-1!==(t=(n=a[s]).indexOf(\":\"))&&(r=n.slice(0,t).toLowerCase(),i=d(n.slice(t+1)),o[r]=i);return o}(this.xhr.getAllResponseHeaders()),this.header[\"content-type\"]=this.xhr.getResponseHeader(\"content-type\"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body=\"HEAD\"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function _(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on(\"end\",function(){var e,t=null,r=null;try{r=new g(n)}catch(e){return(t=new Error(\"Parser is unable to parse the response\")).parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit(\"response\",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||\"Unsuccessful HTTP response\"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function v(e,t,n){var r=u(\"DELETE\",e);return\"function\"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}u.serializeObject=f,u.parseString=h,u.types={html:\"text/html\",json:\"application/json\",xml:\"text/xml\",urlencoded:\"application/x-www-form-urlencoded\",form:\"application/x-www-form-urlencoded\",\"form-data\":\"application/x-www-form-urlencoded\"},u.serialize={\"application/x-www-form-urlencoded\":f,\"application/json\":JSON.stringify},u.parse={\"application/x-www-form-urlencoded\":h,\"application/json\":JSON.parse},s(g.prototype),g.prototype._parseBody=function(e){var t=u.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=u.parse[\"application/json\"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r=\"cannot \"+t+\" \"+n+\" (\"+this.status+\")\",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},u.Response=g,i(_.prototype),a(_.prototype),_.prototype.type=function(e){return this.set(\"Content-Type\",u.types[e]||e),this},_.prototype.accept=function(e){return this.set(\"Accept\",u.types[e]||e),this},_.prototype.auth=function(e,t,n){1===arguments.length&&(t=\"\"),\"object\"==typeof t&&null!==t&&(n=t,t=\"\"),n||(n={type:\"function\"==typeof btoa?\"basic\":\"auto\"});return this._auth(e,t,n,function(e){if(\"function\"==typeof btoa)return btoa(e);throw new Error(\"Cannot use basic auth, btoa is not a function\")})},_.prototype.query=function(e){return\"string\"!=typeof e&&(e=f(e)),e&&this._query.push(e),this},_.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error(\"superagent can't mix .send() and .attach()\");this._getFormData().append(e,t,n||t.name)}return this},_.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},_.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit(\"error\",e)),n(e,t)},_.prototype.crossDomainError=function(){var e=new Error(\"Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.\");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},_.prototype.buffer=_.prototype.ca=_.prototype.agent=function(){return console.warn(\"This is not supported in browser version of superagent\"),this},_.prototype.pipe=_.prototype.write=function(){throw Error(\"Streaming is not supported in browser version of superagent\")},_.prototype._isHost=function(e){return e&&\"object\"==typeof e&&!Array.isArray(e)&&\"[object Object]\"!==Object.prototype.toString.call(e)},_.prototype.end=function(e){return this._endCalled&&console.warn(\"Warning: .end() was called twice. This is not supported in superagent\"),this._endCalled=!0,this._callback=e||c,this._finalizeQueryString(),this._end()},_.prototype._end=function(){var e=this,t=this.xhr=u.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit(\"end\")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit(\"progress\",n)};if(this.hasListeners(\"progress\"))try{t.onprogress=r.bind(null,\"download\"),t.upload&&(t.upload.onprogress=r.bind(null,\"upload\"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&\"GET\"!=this.method&&\"HEAD\"!=this.method&&\"string\"!=typeof n&&!this._isHost(n)){var i=this._header[\"content-type\"],a=this._serializer||u.serialize[i?i.split(\";\")[0]:\"\"];!a&&m(i)&&(a=u.serialize[\"application/json\"]),a&&(n=a(n))}for(var o in this.header)null!=this.header[o]&&this.header.hasOwnProperty(o)&&t.setRequestHeader(o,this.header[o]);return this._responseType&&(t.responseType=this._responseType),this.emit(\"request\",this),t.send(void 0!==n?n:null),this},u.agent=function(){return new l},[\"GET\",\"POST\",\"OPTIONS\",\"PATCH\",\"PUT\",\"DELETE\"].forEach(function(e){l.prototype[e.toLowerCase()]=function(t,n){var r=new u.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),l.prototype.del=l.prototype.delete,u.get=function(e,t,n){var r=u(\"GET\",e);return\"function\"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},u.head=function(e,t,n){var r=u(\"HEAD\",e);return\"function\"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},u.options=function(e,t,n){var r=u(\"OPTIONS\",e);return\"function\"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},u.del=v,u.delete=v,u.patch=function(e,t,n){var r=u(\"PATCH\",e);return\"function\"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},u.post=function(e,t,n){var r=u(\"POST\",e);return\"function\"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},u.put=function(e,t,n){var r=u(\"PUT\",e);return\"function\"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){\"use strict\";e.exports=function(e){return null!==e&&\"object\"==typeof e}},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(10),i=n(1),a=function(){};Object.defineProperty(a,\"debug_level1\",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(a,\"debug_level2\",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(a,\"filter\",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(a,\"debug_element\",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(a,\"debug_css_list\",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(a,\"init\",{configurable:!0,enumerable:!0,writable:!0,value:function(){console.log(\"CssManager.init()\"),this.generateBrowserKeyDictionary()}}),Object.defineProperty(a,\"setDebugLevel\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=this;switch(parseInt(e)){case 1:t.debug_level1=!0,t.debug_level2=!1;break;case 2:t.debug_level1=!0,t.debug_level2=!0;break;default:t.debug_level1=!1,t.debug_level2=!1}}}),Object.defineProperty(a,\"setDebugFilter\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){console.log(\"CssManager.setDebugFilter(),\",e),this.filter=e,this.debug_level1=!0}}),Object.defineProperty(a,\"ifDebug\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=this;return t.filter?!(!t.passDebugFilter()||!t[e])||void 0:t[e]}}),Object.defineProperty(a,\"passDebugFilter\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=this;if(e.debug_element&&e.debug_element.id.indexOf(e.filter)>-1)return!0;if(e.debug_css_list)for(var t in e.debug_css_list){if(t.indexOf(e.filter)>-1)return!0;if(String(e.debug_css_list[t]).indexOf(e.filter)>-1)return!0}return!1}}),Object.defineProperty(a,\"generateBrowserKeyDictionary\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=this;console.log(\"CssManager.generateBrowserKeyDictionary()\"),e.deviceKeyDict={};var t=document.createElement(\"div\").style;for(var n in t){var i=e.getPrefix(n),a=e.standardizeKey(n);switch(r.Device.browser){case\"safari\":\"webkit\"==i?e.deviceKeyDict[a]=e.prependPrefix(\"webkit\",a):e.prependPrefix(\"webkit\",a)in t||(e.deviceKeyDict[a]=a);break;case\"firefox\":var o=e.prependPrefix(\"Moz\",a),s=e.prependPrefix(\"Webkit\",a);a in t?e.deviceKeyDict[a]=a:\"moz\"==i?e.camelateKey(\"webkit-\"+a)in t&&(e.deviceKeyDict[a]=o):\"webkit\"==i&&(o in t||(e.deviceKeyDict[a]=s));break;case\"chrome\":case\"ie\":default:a in t?e.deviceKeyDict[a]=a:i&&(e.deviceKeyDict[a]=e.prependPrefix(i,a))}}console.log(\" KEY DICTIONARY:\",e.deviceKeyDict)}}),Object.defineProperty(a,\"apply\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){var n=this;n.debug_element=e,n.debug_css_list=t,n.ifDebug(\"debug_level1\")&&console.log(\"  CssManager.apply()\",e.id);var r={};for(var i in t)i.match(/^transform\\(/)?r[i]=t[i]:(n.ifDebug(\"debug_level1\")&&console.log(\"   \"+i+\": \"+t[i]+\";\"),e.style[n.getDeviceKey(i)]=t[i]);n.applyTransforms(e,r),n.ifDebug(\"debug_level1\")&&console.log(\"\\n\\n\"),n.debug_element=null,n.debug_css_list=null}}),Object.defineProperty(a,\"conformCssObject\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){var n=this;n.debug_element=t,n.ifDebug(\"debug_level1\")&&console.log(\"CssManager.conformCssObject()\",e);var r={};if(e)for(var i in e){n.ifDebug(\"debug_level2\")&&console.log(\"  PARSE( key: \"+i+\", value: \"+e[i]+\" )\");var a=n.conformKeyValue(i,e[i]);for(var o in a)n.ifDebug(\"debug_level2\")&&console.log(\"    CONFORMED DECLARATION:\",a[o]),r[a[o][0]]=a[o][1]}return n.debug_element=null,r}}),Object.defineProperty(a,\"conformCssString\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){var n=this;n.debug_element=t,n.ifDebug(\"debug_level1\")&&console.log(\" CssManager.conformCssString()\");var r={};if(e){var i=e.split(/\\s*;\\s*/);for(var a in i)if(i[a]){var o=i[a].split(/:(.+)?/);n.ifDebug(\"debug_level2\")&&console.log(\"  PARSE( key: \"+o[0]+\", value: \"+o[1]+\" )\");var s=n.conformKeyValue(o[0],o[1]);for(var l in s)n.ifDebug(\"debug_level2\")&&console.log(\"    CONFORMED DECLARATION:\",s[l]),r[s[l][0]]=s[l][1]}}return n.debug_element=null,r}}),Object.defineProperty(a,\"conformCssKeyValue\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){this.ifDebug(\"debug_level1\")&&console.log(\" CssManager.conformCssKeyValue()\");var n={};return n[e]=t,this.conformCssObject(n)}}),Object.defineProperty(a,\"applyTransforms\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){var n=this;n.ifDebug(\"debug_level1\")&&console.log(\"    - CssManager.applyTransforms(), \",t);var r=new i.Matrix2D,a=e.style[n.getDeviceKey(\"transform\")].match(/matrix[^\\)]+\\)/);if(a&&(r.setFromCss(a[0]),n.ifDebug(\"debug_level2\")&&console.log(\"       existing matrix:\",r.data)),\"transforms\"in e)var o=e.transforms;else o={tx:0,ty:0,rz:0,sx:1,sy:1};var s={};for(var l in t){s[l.match(/\\(\\s([^\\s]+)/)[1]]=t[l]}if(void 0!=s.tx&&(r.data[2]=0),void 0!=s.ty&&(r.data[5]=0),void 0!=s.rz){var c=-o.rz;r.rotate(c*(Math.PI/180)),r.rotate(s.rz*(Math.PI/180)),o.rz=s.rz}if(void 0!=s.sx){c=1/o.sx;r.scale(c,1),r.scale(s.sx,1),o.sx=s.sx}if(void 0!=s.sy){c=1/o.sy;r.scale(1,c),r.scale(1,s.sy),o.sy=s.sy}void 0!=s.tx&&(r.translate(s.tx,0),o.tx=s.tx),void 0!=s.ty&&(r.translate(0,s.ty),o.ty=s.ty),e.transforms=o,n.ifDebug(\"debug_level2\")&&console.log(\"       updated matrix:\",r.data),e.style[n.getDeviceKey(\"transform\")]=r.getCss()}}),Object.defineProperty(a,\"conformKeyValue\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){e=String(e).trim(),t=String(t).trim();var n=this.standardizeKey(e);return this.conformValue(n,t)}}),Object.defineProperty(a,\"hasPrefix\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return e.search(this.matchPrefixRegex())>-1}}),Object.defineProperty(a,\"getPrefix\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=e.match(this.matchPrefixRegex());return t?t[1].replace(/-/g,\"\").toLowerCase():null}}),Object.defineProperty(a,\"stripPrefix\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=e.replace(this.matchPrefixRegex(),\"\");return t.charAt(0).toLowerCase()+t.slice(1)}}),Object.defineProperty(a,\"getDeviceKey\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return e in this.deviceKeyDict?this.deviceKeyDict[e]:e}}),Object.defineProperty(a,\"prependPrefix\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){return e+t.replace(/^(.)/,function(e){return e.charAt(0).toUpperCase()})}}),Object.defineProperty(a,\"standardizeKey\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=this;return e=(e=t.stripPrefix(e))in t.keyFormatExceptions()?t.keyFormatExceptions()[e]:t.camelateKey(e),t.ifDebug(\"debug_level2\")&&console.log('    - result: \"'+e+'\"'),e}}),Object.defineProperty(a,\"camelateKey\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return e=e.replace(/-(.)/g,function(e){return e.charAt(1).toUpperCase()})}}),Object.defineProperty(a,\"keyFormatExceptions\",{configurable:!0,enumerable:!0,writable:!0,value:function(){return{x:\"transform( tx )\",translateX:\"transform( tx )\",y:\"transform( ty )\",translateY:\"transform( ty )\",rotate:\"transform( rz )\",rotation:\"transform( rz )\",scaleX:\"transform( sx )\",scaleY:\"transform( sy )\",scale:\"transform( sx ),transform( sy )\"}}}),Object.defineProperty(a,\"conformValue\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){var n,r=this,i=[],a=t.match(/\\s/),o=t.match(r.matchNumberRegex());if(!a&&o){r.ifDebug(\"debug_level2\")&&console.log(\"   conform value as number\"),n=Number(o[0]);var s=t.match(/[^0-9\\.]+$/);if(s)n+=s[0];else switch(e){case\"top\":case\"right\":case\"bottom\":case\"left\":case\"width\":case\"height\":case\"fontSize\":case\"lineHeight\":case\"padding\":case\"margin\":case\"marginRight\":case\"marginLeft\":case\"marginTop\":case\"marginBottom\":case\"borderRadius\":case\"borderWidth\":case\"letterSpacing\":n+=\"px\"}}else if(\"backgroundImage\"==e)r.ifDebug(\"debug_level2\")&&console.log(\"   conform value as background image\"),n='url( \"'+(t=t.replace(/^url\\(\\s*['\"]*/,\"\").replace(/['\"]*\\s*\\)$/,\"\"))+'\" )';else if(\"transform\"==e){r.ifDebug(\"debug_level2\")&&console.log('   convert \"transform\" functions to individual transforms');for(var l=/([a-z0-9]+)\\(([^\\)]+)\\)/gi;params=l.exec(t);){var c=params[2].replace(/\\s/g,\"\").split(\",\").map(function(e,t,n){return Number(e.match(r.matchNumberRegex())[0])});switch(params[1]){case\"translate\":i.push([\"transform( tx )\",c[0]]),i.push([\"transform( ty )\",c[1]]);break;case\"translateX\":i.push([\"transform( tx )\",c[0]]);break;case\"translateY\":i.push([\"transform( ty )\",c[0]]);break;case\"rotate\":i.push([\"transform( rz )\",c[0]]);break;case\"scale\":i.push([\"transform( sx )\",c[0]]),i.push([\"transform( sy )\",c[1]]);break;case\"scaleX\":i.push([\"transform( sx )\",c[0]]);break;case\"scaleY\":i.push([\"transform( sy )\",c[0]])}}}else r.ifDebug(\"debug_level2\")&&console.log(\"   conform value as string\"),n=t;if(void 0!=n){r.ifDebug(\"debug_level2\")&&console.log('    - result: \"'+n+'\"');for(var u=e.split(/\\,/),d=0;d<u.length;d++)i.push([u[d],n])}return i}}),Object.defineProperty(a,\"matchNumberRegex\",{configurable:!0,enumerable:!0,writable:!0,value:function(){return/^[+-]?[0-9]*\\.?[0-9]+/}}),Object.defineProperty(a,\"matchPrefixRegex\",{configurable:!0,enumerable:!0,writable:!0,value:function(){return/^-*(moz-*|webkit-*|ms-*|o-)/i}});var o=a;t.default=o},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=function(){var e=this;e.identity=new Float32Array([1,0,0,0,1,0]),e.data=new Float32Array(e.identity)};r.prototype={clear:function(){this.data=new Float32Array(this.identity)},rotate:function(e){var t=this,n=new Float32Array(t.identity),r=Math.cos(e).toFixed(15),i=Math.sin(e).toFixed(15);return n[0]=r,n[1]=i,n[3]=-i,n[4]=r,t.multiply(n,!1),t},scale:function(e,t){var n=this,r=new Float32Array(n.identity);return r[0]=e,r[4]=t,n.multiply(r,!1),n},skew:function(e,t){var n=this,r=new Float32Array(n.identity);return r[1]=Math.tan(e),r[3]=Math.tan(t),n.multiply(r),n},translate:function(e,t){var n=this,r=new Float32Array(n.identity);return r[2]=e||0,r[5]=t||0,n.multiply(r,!0),n},multiply:function(e,t){for(var n=this,r=new Float32Array(n.data),i=t?e:r,a=t?r:e,o=0;o<6;o++){var s=3*Math.floor(o/3),l=o%3;n.data[o]=i[s]*a[l]+i[s+1]*a[l+3]}n.data[2]+=i[2],n.data[5]+=i[5]},setFromCss:function(e){var t=e.match(/\\(([^\\)]+)\\)/)[1].replace(/\\s/g,\"\").split(\",\").map(Number);this.data=[t[0],t[1],t[4],t[2],t[3],t[5]]},getCss:function(){var e=this;return\"matrix(\"+e.data[0]+\",\"+e.data[1]+\",\"+e.data[3]+\",\"+e.data[4]+\",\"+e.data[2]+\",\"+e.data[5]+\")\"}};var i=r;t.default=i},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(0),i=function(){function e(e,t){this.x=e||0,this.y=t||0}var t=e.prototype;return t.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.dist=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},t.mult=function(e){return this.x*=e,this.y*=e,this},t.div=function(e){return this.x/=e,this.y/=e,this},t.limit=function(e){var t=this.length();return t>e&&this.mult(e/t),this},t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.normalize=function(){var e=1/this.length();return this.mult(e)},t.clone=function(){return new e(this.x,this.y)},e.degreeToVector=function(t){var n=r.MathUtils.toRadians(t);return new e(Math.cos(n),Math.sin(n))},e.random=function(t){var n=t||.01;return e.degreeToVector(r.MathUtils.random(0,360,n))},e}();t.default=i},function(e,t,n){\"use strict\";(function(e){t.__esModule=!0,t.addToLoad=function(e,t){var n=r.LoaderUtils.getFileName(e);if(!h(n,!0)){var i=t&&1==t.forCanvas;i?o.push(e):a.push(e)}return n},t.addLoader=function(e){s.push(e)},t.get=function(e){if(c[e])return c[e];throw new Error(\"ImageManager : No image named '\"+e+\"' has been loaded\")},t.available=h,t.load=m,t.addFbaImages=function(e){e&&g(e.getAllContentRaw())},t.addToDictionary=g;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(53));var i,a=[],o=[],s=[],l=[],c={},u=!1,d=0,f=function(){},p=function(){};function h(e,t){var n=void 0!=c[e];return n?t&&console.log(\"ImageManager.available() --\\x3e\",!0,': Duplicate Image Id \"'+e+'\". One or more images loading in have the same name. Each Image needs a unique file name.'):t||console.log(\"ImageManager.available() --\\x3e\",!1,\": No image named '\"+e+\"' has been loaded\"),n}function m(t,n){if(p=n||e.failAd,u)l.push(t);else{i=new r.default({name:\"imageManagerLoader\",onComplete:function(e){u=!1,g(e.getAllContentRaw())},onFail:function(e){u=!1,p.call()}}),f=[].concat(t),l=[];var c=a.slice();a=[],i.add(new r.default(c,{name:\"dynamicImages-\"+d++,fileType:\"jpg\"}));var h=o.slice();o=[],i.add(new r.default(h,{name:\"dynamicCanvasImages-\"+d++,fileType:\"jpg\",crossOrigin:\"anonymous\"}));var m=s.slice();s=[];for(var _=0;_<m.length;_++)i.add(m[_]);u=!0,i.load()}}function g(e){for(var t=0;t<e.length;t++)if(e[t]instanceof Image||e[t]instanceof SVGElement){var n=e[t];h(e[t].id,!0)||(c[n.id]=n)}console.log(\"ImageManager:\",c);for(t=0;t<f.length;t++)f[t].call();l.length>0&&m(l)}}).call(this,n(11))},function(e,t,n){\"use strict\";t.__esModule=!0,t.getDeployProfile=function(e){for(var t=0;t<environments.length;t++)if(environments[t].id===e)return environments[t];return!1},t.getQueryParams=function(){var e={},t=window.location.href.split(\"?\");if(t.length>1){var n=t[1].split(\"&\");for(var r in n){var i=n[r].split(\"=\");2==i.length&&(e[i[0]]=decodeURIComponent(i[1]))}}return e},t.matchProtocolTo=function(e){var t=e.search(/^\\/\\//)>-1;if(e.search(/^http/)>-1||t){var n=window.location.href.search(/^https/)>-1||window.adParams&&adParams.forceHttps,r=n?\"https://\":\"http://\";if(t&&(e=e.replace(/^\\/\\//,r)),e.search(/.*edgecastcdn/)>-1){var i=n?\"ne1.\"+e.match(/w(a|p)c/i)[0]+\".\":e.match(/w(a|p)c\\.[a-z0-9]*\\./i)[0];e=r+i+\"edgecastcdn\"+e.replace(/.*edgecastcdn/,\"\")}else if(e.search(/.*paramount\\.com/)>-1){var a=n?\"paramountdlds-a.akamaihd.net\":\"downloads.paramount.com\";e=r+a+e.replace(/.*paramount\\.com/,\"\")}else e=e.search(/espn\\.go\\.com/)>-1||e.search(/secure\\.espncdn\\.com/)>-1?\"https://secure.espncdn.com\"+e.replace(/^.*\\.com/,\"\"):e.replace(/^https?\\:\\/\\//i,r)}return e},t.isVersionOrNewer=function(e){var t=e.split(\".\").map(function(e){return parseInt(e)});if(adParams.version.major>t[0])return!0;if(adParams.version.major===t[0]){if(adParams.version.minor>t[1])return!0;if(adParams.version.minor>t[1]&&adParams.version.patch>=t[2])return!0}return!1}},function(e,t,n){\"use strict\";t.__esModule=!0,t.LoaderTicker=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(4));t.LoaderTicker=function(e){return function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n._setTicker=function(e){var t=this,n=document.createElement(\"div\");n.innerHTML=e.content,n.style.cssText=e.css||\"\",document.body.appendChild(n);var r=void 0!=e.width?e.width:n.offsetWidth;n.style.fontFamily=e.font||\"\";var i=setTimeout(function(){clearInterval(a),t._handleFail()},5e3),a=setInterval(function(){n.offsetWidth!=r&&(clearTimeout(i),clearInterval(a),t._handleTickerComplete(n))},10)},n._removeTickerNode=function(e){e.parentNode.removeChild(e)},t}(e)}},function(e,t,n){\"use strict\";t.__esModule=!0,t.GestureEvent=t.FrameRateBase=t.FrameRate=t.UIEvent=t.GestureBase=t.Gesture=void 0;var r=c(n(59));t.Gesture=r.default;var i=c(n(25));t.GestureBase=i.default;var a=c(n(65));t.UIEvent=a.default;var o=c(n(66));t.FrameRate=o.default;var s=c(n(27));t.FrameRateBase=s.default;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(26));function c(e){return e&&e.__esModule?e:{default:e}}t.GestureEvent=l},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(10),i=n(12),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(26));var o=function(){function e(e){var t=this;t.elem=e,t.hasActiveChildren=!0,t.debug=!1,t.eventList=[],t._isDragEnabled=!1,t._isDragging=!1,t._give=2,t._oX=0,t._oY=0,t._p1X=0,t._p1Y=0,t._p2X=0,t._p2Y=0,t._sX=0,t._sY=0,t._vX=0,t._vY=0,t._cursor=\"mouse\",t._start=\"down\",t._end=\"up\",t.init()}var t=e.prototype;return t.init=function(){var e=this;e.debug&&console.log(\"GestureBase.init()\"),e._handleTouchStart=e._handleTouchStart.bind(e),e._handleDown=e._handleDown.bind(e),e._handleDrag=e._handleDrag.bind(e),e._handleUp=e._handleUp.bind(e),e._elemAdd=e.elem.addEventListener.bind(e.elem),e._elemRemove=e.elem.removeEventListener.bind(e.elem),e._reset()},t.register=function(e,t){var n=this;n.debug&&console.log(\"GestureBase.register(\",e,\")\"),n.eventList.push(e),n._checkDragEnabled(),n._elemAdd(e,t)},t.unregister=function(e,t){var n=this;n.debug&&console.log(\"GestureBase.unregister(\",e,\")\");var r=n.eventList.indexOf(e);r>=0&&n.eventList.splice(r,1),n._checkDragEnabled(),n._elemRemove(e,t)},t._reset=function(){var e=this;e._cursor=\"mouse\",e._start=\"down\",e._end=\"up\",e.elem.addEventListener(\"touchstart\",e._handleTouchStart),\"ios\"!=r.Device.os&&e.elem.addEventListener(\"mousedown\",e._handleDown)},t._checkDragEnabled=function(){var e=this.eventList.join(\"\").indexOf(\"onDrag\");this._isDragEnabled=e>-1},t._getEventScope=function(e){return e.changedTouches?e.changedTouches[0]:e},t._add=function(e,t){window.addEventListener(this._cursor+e,t)},t._remove=function(e,t){window.removeEventListener(this._cursor+e,t)},t._handleDown=function(e){var t=this;t.debug&&console.log(\"GestureBase._handleDown()\"),a.startPoint(),t.elem.removeEventListener(\"touchstart\",t._handleTouchStart),\"ios\"!=r.Device.os&&t.elem.removeEventListener(\"mousedown\",t._handleDown),t._isDragging=!1,t._add(t._end,t._handleUp),t._add(\"move\",t._handleDrag);var n=t._getEventScope(e),o=n.pageX,s=n.pageY,l=t.elem.getBoundingClientRect(),c=o-l.left,u=s-l.top,d=t.elem.x||i.Styles.getCss(t.elem,\"x\"),f=t.elem.y||i.Styles.getCss(t.elem,\"y\"),p=l.left-d,h=l.top-f;t._oX=p+c,t._oY=h+u;var m=o-t._oX,g=s-t._oY;t._sX=t._p1X=t._p2X=o,t._sY=t._p1Y=t._p2Y=s,function(e){if(a.stopped(e))return;var n=new a.Event(e,o,s,c,u,m,g);t.debug&&console.log(\" -> dispatch\",e);t.elem.dispatchEvent(n)}(\"onPress\")},t._handleUp=function(e,t){var n=this;n.debug&&console.log(\"GestureBase._handleUp()\"),n._remove(n._end,n._handleUp),n._remove(\"move\",n._handleDrag);var r=n._getEventScope(e),i=r.pageX,o=r.pageY,s=n.elem.getBoundingClientRect(),l=i-s.left,c=o-s.top,u=i-n._oX,d=o-n._oY;!0!==t&&g(\"onRelease\");var f=s.top+window.pageYOffset,p=f+s.height,h=s.left+window.pageXOffset,m=h+s.width;function g(e){if(!a.stopped(e)){var t=new a.Event(e,i,o,l,c,u,d,0,0,n._vX,n._vY);n.debug&&console.log(\" -> dispatch\",e),n.elem.dispatchEvent(t)}}n._isDragging?(n._isDragEnabled&&n._dragEndOrSwipe(\"onDragStop\"),console.log(\"  -> No CLICK Fired, was dragging\")):i>h&&i<m&&o>f&&o<p&&g(\"onSelect\"),n._isDragging&&n._dragEndOrSwipe(\"onSwipe\"),n._reset(),e.preventDefault(),a.endPoint()},t._handleTouchStart=function(e){var t=this;t.debug&&console.log(\"GestureBase._handleTouchStart()\"),t._cursor=\"touch\",t._start=\"start\",t._end=\"end\",t._handleDown(e)},t._handleDrag=function(e){var t=this;t.debug&&console.log(\"GestureBase._handleDrag()\");var n=t._getEventScope(e),r=n.pageX,i=n.pageY,o=r-t._p1X,s=r-t._p2X;t._vX=(s-o)/2+o;var l=i-t._p1Y,c=i-t._p2Y;t._vY=(c-l)/2+l;var u=r-t._oX,d=i-t._oY,f=t.elem.getBoundingClientRect(),p=r-f.left,h=i-f.top;function m(e){if(!a.stopped(e)){var n=new a.Event(e,r,i,p,h,u,d,t._p1X-t._sX,t._p1Y-t._sY,t._vX,t._vY);t.debug&&console.log(\" -> dispatch\",e),t.elem.dispatchEvent(n)}}t._isDragging?t._isDragEnabled&&m(\"onDrag\"):(Math.abs(t._sX-r)>t._give||Math.abs(t._sY-i)>t._give)&&(t._isDragging=!0,t._isDragEnabled&&m(\"onDragStart\")),t._p2X=t._p1X,t._p1X=r,t._p2Y=t._p1Y,t._p1Y=i},t._dragEndOrSwipe=function(e){var t=this;if(t.debug&&console.log(\"GestureBase._dragEndOrSwipe()\",e),!a.stopped(name)){var n=t.elem.getBoundingClientRect(),r=new a.Event(e,t._p1X,t._p1Y,t._p1X-n.left,t._p1Y-n.top,t._p1X-t._oX,t._p1Y-t._oY,t._p2X-t._sX,t._p2Y-t._sY,t._vX,t._vY);t.debug&&console.log(\" -> dispatch\",e),t.elem.dispatchEvent(r)}},e}();t.default=o},function(e,t,n){\"use strict\";t.__esModule=!0,t.startPoint=function(){i||(i=!0,r={})},t.endPoint=function(){i=!1},t.SWIPE=t.DRAG_STOP=t.DRAG_START=t.DRAG=t.CLICK=t.RELEASE=t.PRESS=t.MOVE=t.OUT=t.OVER=t.stopped=t.stop=t.Event=void 0;var r={},i=!1;var a=function(e,t,n,r,i,a,o,s,l,c,u){var d=new CustomEvent(e);return d.mouse={global:{x:t,y:n},local:{x:r,y:i}},d.element={x:a||0,y:o||0},d.distance={x:s||0,y:l||0},d.velocity={x:c||0,y:u||0},d.direction={x:c>0?\"right\":c<0?\"left\":null,y:u>0?\"down\":u<0?\"up\":null},d};t.Event=a;var o=function(e){e&&(e.stopImmediatePropagation(),r[e.type]=!0)};t.stop=o;var s=function(e){return void 0!=r[e]};t.stopped=s;t.OVER=\"mouseover\";t.OUT=\"mouseout\";t.MOVE=\"mousemove\";t.PRESS=\"onPress\";t.RELEASE=\"onRelease\";t.CLICK=\"onSelect\";t.DRAG=\"onDrag\";t.DRAG_START=\"onDragStart\";t.DRAG_STOP=\"onDragStop\";t.SWIPE=\"onSwipe\"},function(e,t,n){\"use strict\";function r(e){var t=this;t.pool=[],t.fps=e,t._frameTime=Math.floor(1e3/t.fps),t._prevTime=0,t._startTime=0,t._nextTime=0,t._maxLag=400,t._shiftLag=30,t._paused=!1,t._prevCallTime=Date.now(),t.diffTime=0}t.__esModule=!0,t.default=void 0,r.prototype={resume:function(){var e=this;e._isPaused&&(e._startTime=Date.now(),e._prevCallTime=e._startTime,e._prevTime=e._startTime,e._nextTime=0,e._isPaused=!1)},tick:function(){var e=this;if(!e._paused){var t=!1,n=Date.now(),r=n-e._prevTime;r>e._maxLag&&(console.log(\"...lag\"),e._startTime+=r-e._shiftLag),e._prevTime=n;var i=e._prevTime-e._startTime-e._nextTime;i>0&&(e._nextTime+=i>=e._frameTime?i:e._frameTime,t=!0,e.diffTime=n-e._prevCallTime,e._prevCallTime=n),t&&e.dispatch()}},dispatch:function(){for(var e=0;e<this.pool.length;e++){var t=this.pool[e];t.handler.call(t.from,this)}}};var i=r;t.default=i},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(1),i=(a(n(13)),a(n(14)));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,n){var a=this;a.fps=n,a.graphic=t.graphic,a.properties=t.generateIndividualProperties(),a.frameCount=0,a.ctx=e,a._lifeSpanFrameCount=i.default.secToFrameCount(a.properties.lifeSpan,a.fps),a._force=new r.Vector2D(0,0),a._hasAnimation=function(){var e=a.properties.animations;for(var t in e)if(e[t].steps.length>0)return!0;return!1}.bind(a)(),a._hasTurbulence=function(){var e=a.properties.turbulence;return 0!==e.rate&&0!==e.x&&0!==e.y}.bind(a)()};o.prototype={update:function(){var e=this.properties;e.velocity.clone();if(e.velocity.mult(1+e.acceleration),e.velocity.add(this._force),e.velocity.limit(e.maxSpeed),e.location.add(e.velocity),this._force.mult(0),this._hasTurbulence){this.noiseStart||(this.noiseStart=new r.Vector2D.random,this.noiseStart.mult(250));var t=e.turbulence;this.noiseStart.add(new r.Vector2D(t.rate,t.rate));var n=r.SimpleNoise2D.get(this.noiseStart.x,this.noiseStart.y);e.location.x+=n.x*t.xAmplitude,e.location.y+=n.y*t.yAmplitude}e.style.x=e.location.x,e.style.y=e.location.y,this.frameCount++},getAnimationStyle:function(){var e=this.properties,t={},n=i.default.frameCountToSec(this.frameCount,this.fps),r=i.default.easyTween(e.animations,e.lifeSpan,n);for(var a in e.style)if(void 0!==r[a]){var o=e.style[a]*r[a];t[a]=o}else t[a]=e.style[a];return t},render:function(){var e=this._hasAnimation?this.getAnimationStyle():this.properties.style;this.graphic.render(this.ctx,e,this.frameCount)},applyForce:function(e){this._force.add(e)},isDead:function(e,t,n){var r=this.properties;if(this._lifeSpanFrameCount-this.frameCount<=0)return!0;if(n){var i=r.location,a=this.graphic,o=Math.max(a.width,a.height)*r.style.scale;if(i.x-o>e||i.y-o>t||i.x+o<0||i.y+o<0)return!0}return!1},checkWorld:function(e){var t=this.properties.location,n=this.properties.bodySize,r=e[0]+n,i=e[1]-n,a=e[2]+n,o=e[3]-n;t.x<=r?this._checkBorder(\"x\",r):t.x>=i&&this._checkBorder(\"x\",i),t.y<=a?this._checkBorder(\"y\",a):t.y>=o&&this._checkBorder(\"y\",o)},_checkBorder:function(e,t){var n=this.properties,r=n.velocity,i=n.bounceAmount;\"x\"===e?(r.x*=-i,r.y*=i,n.location.x=t):(r.x*=i,r.y*=-i,n.location.y=t)}};var s=o;t.default=s},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r={create:function(e){return document.createElement(e)},addClass:function(e,t){e.classList.add(t)},removeClass:function(e,t){e.classList.remove(t)},setStyle:function(e,t){for(var n in t)e.style[n]=t[n]},setGroupStyle:function(e,t){var n;for(n=0;n<e.length;n++)this.setStyle(e[n],t)}};t.default=r},function(e,t,n){\"use strict\";n(31);var r=l(n(16)),i=n(9),a=l(n(69)),o=n(77),s=n(8);l(n(29));function l(e){return e&&e.__esModule?e:{default:e}}var c=/([a-zA-Z0-9_.-]*)\\.(png|jpg|jpeg)/,u=(0,o.getParamInQueryString)(\"size\");function d(e){if(0!==e.emitterDataFiles.length){var t=(0,o.mergePath)((0,o.getAdPathFromUrl)(),u),n=e.imagePaths.filter(function(e){return c.test(e)});n.forEach(function(e){var t=(0,o.mergePath)(\"/images\",e);i.ImageManager.addToLoad(t)}),i.ImageManager.load(function(){var r=n.map(function(e){return c.exec(e)[1]});!function(e){var t=e.content,n=e.adPath,r=e.loadedImageNames,i=(0,o.parseAdSize)(n);(0,s.set)(\"adPath\",n),(0,s.set)(\"adWidth\",i.width),(0,s.set)(\"adHeight\",i.height),(0,s.set)(\"imagePaths\",t.images),(0,s.set)(\"loadedImageNames\",r),(0,s.set)(\"emitterDataFiles\",t.emitterDataFiles)}({content:e,adPath:t,loadedImageNames:r}),window.Interface=new a.default})}else{document.querySelector(\"#data-selector\").classList.add(\"show-warning\",\"show\")}}r.default.get(\"/ad-es6-particles/api/?action=getInfo&size=\"+u).end(function(e,t){if(e)alert(\"Erro with API. Unable to proceed\");else try{var n=JSON.parse(t.text),r=JSON.parse(n.stdout);r.emitterDataFiles=r.emitterDataFiles.map(function(e){return{name:e.name,content:function(e){var t=e.replace(/\\r?\\n|\\r|\\s/g,\"\"),n=/\\{(.*)\\}/.exec(t);return n?n[0]:\"\"}(e.content)}}),d(r)}catch(e){alert(e)}})},function(e,t,n){\"use strict\";window.dat=window.dat||{},dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css={load:function(e,t){var n=(t=t||document).createElement(\"link\");n.type=\"text/css\",n.rel=\"stylesheet\",n.href=e,t.getElementsByTagName(\"head\")[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement(\"style\");n.type=\"text/css\",n.innerHTML=e,t.getElementsByTagName(\"head\")[0].appendChild(n)}},dat.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(t)if(e&&t.forEach&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0){for(var i=0,a=t.length;i<a;i++)if(i in t&&n.call(r,t[i],i)===this.BREAK)return}else for(var i in t)if(n.call(r,t[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+\"\"},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return\"[object Function]\"===Object.prototype.toString.call(e)}}}(),dat.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement(\"div\"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0};return dat.utils.common.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(),dat.dom.dom=function(e){var t={};e.each({HTMLEvents:[\"change\"],MouseEvents:[\"click\",\"mousemove\",\"mousedown\",\"mouseup\",\"mouseover\"],KeyboardEvents:[\"keydown\"]},function(n,r){e.each(n,function(e){t[e]=r})});var n=/(\\d+(\\.\\d+)?)px/;function r(t){if(\"0\"===t||e.isUndefined(t))return 0;var r=t.match(n);return e.isNull(r)?0:parseFloat(r[1])}var i={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?\"auto\":\"none\",e.style.KhtmlUserSelect=t?\"auto\":\"none\",e.unselectable=t?\"on\":\"off\")},makeFullscreen:function(t,n,r){e.isUndefined(n)&&(n=!0),e.isUndefined(r)&&(r=!0),t.style.position=\"absolute\",n&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(n,r,i,a){i=i||{};var o=t[r];if(!o)throw new Error(\"Event type \"+r+\" not supported.\");var s=document.createEvent(o);switch(o){case\"MouseEvents\":var l=i.x||i.clientX||0,c=i.y||i.clientY||0;s.initMouseEvent(r,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break;case\"KeyboardEvents\":var u=s.initKeyboardEvent||s.initKeyEvent;e.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(r,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(r,i.bubbles||!1,i.cancelable||!0)}e.defaults(s,a),n.dispatchEvent(s)},bind:function(e,t,n,r){return r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent(\"on\"+t,n),i},unbind:function(e,t,n,r){return r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent(\"on\"+t,n),i},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1==n.indexOf(t)&&(n.push(t),e.className=n.join(\" \").replace(/^\\s+/,\"\").replace(/\\s+$/,\"\"))}return i},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute(\"class\");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!=r&&(n.splice(r,1),e.className=n.join(\" \"))}else e.className=void 0;return i},hasClass:function(e,t){return new RegExp(\"(?:^|\\\\s+)\"+t+\"(?:\\\\s+|$)\").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return r(t[\"border-left-width\"])+r(t[\"border-right-width\"])+r(t[\"padding-left\"])+r(t[\"padding-right\"])+r(t.width)},getHeight:function(e){var t=getComputedStyle(e);return r(t[\"border-top-width\"])+r(t[\"border-bottom-width\"])+r(t[\"padding-top\"])+r(t[\"padding-bottom\"])+r(t.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return i}(dat.utils.common),dat.controllers.OptionController=function(e,t,n){var r=function e(r,i,a){e.superclass.call(this,r,i);var o=this;if(this.__select=document.createElement(\"select\"),n.isArray(a)){var s={};n.each(a,function(e){s[e]=e}),a=s}n.each(a,function(e,t){var n=document.createElement(\"option\");n.innerHTML=t,n.setAttribute(\"value\",e),o.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,\"change\",function(){var e=this.options[this.selectedIndex].value;o.setValue(e)}),this.domElement.appendChild(this.__select)};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(e,t){var n=function e(n,i,a){e.superclass.call(this,n,i),a=a||{},this.__min=a.min,this.__max=a.max,this.__step=a.step,t.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=.1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=r(this.__impliedStep)};function r(e){return(e=e.toString()).indexOf(\".\")>-1?e.length-e.indexOf(\".\")-1:0}return n.superclass=e,t.extend(n.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=r(e),this}}),n}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(e,t,n){var r=function e(r,i,a){this.__truncationSuspended=!1,e.superclass.call(this,r,i,a);var o,s=this;function l(){var e=parseFloat(s.__input.value);n.isNaN(e)||s.setValue(e)}function c(e){var t=o-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),o=e.clientY}function u(){t.unbind(window,\"mousemove\",c),t.unbind(window,\"mouseup\",u)}this.__input=document.createElement(\"input\"),this.__input.setAttribute(\"type\",\"text\"),t.bind(this.__input,\"change\",l),t.bind(this.__input,\"blur\",function(){l(),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}),t.bind(this.__input,\"mousedown\",function(e){t.bind(window,\"mousemove\",c),t.bind(window,\"mouseup\",u),o=e.clientY}),t.bind(this.__input,\"keydown\",function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(this.getValue(),this.__precision),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(e,t,n,r,i){var a=function e(n,r,i,a,o){e.superclass.call(this,n,r,{min:i,max:a,step:o});var s=this;function l(e){e.preventDefault();var n=t.getOffset(s.__background),r=t.getWidth(s.__background);return s.setValue(function(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}(e.clientX,n.left,n.left+r,s.__min,s.__max)),!1}function c(){t.unbind(window,\"mousemove\",l),t.unbind(window,\"mouseup\",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}this.__background=document.createElement(\"div\"),this.__foreground=document.createElement(\"div\"),t.bind(this.__background,\"mousedown\",function(e){t.bind(window,\"mousemove\",l),t.bind(window,\"mouseup\",c),l(e)}),t.addClass(this.__background,\"slider\"),t.addClass(this.__foreground,\"slider-fg\"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return a.superclass=e,a.useDefaultStyles=function(){n.inject(\"/**\\n * dat-gui JavaScript Controller Library\\n * http://code.google.com/p/dat-gui\\n *\\n * Copyright 2011 Data Arts Team, Google Creative Lab\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n */\\n\\n.slider {\\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\\n  height: 1em;\\n  border-radius: 1em;\\n  background-color: #eee;\\n  padding: 0 0.5em;\\n  overflow: hidden;\\n}\\n\\n.slider-fg {\\n  padding: 1px 0 2px 0;\\n  background-color: #aaa;\\n  height: 1em;\\n  margin-left: -0.5em;\\n  padding-right: 0.5em;\\n  border-radius: 1em 0 0 1em;\\n}\\n\\n.slider-fg:after {\\n  display: inline-block;\\n  border-radius: 1em;\\n  background-color: #fff;\\n  border:  1px solid #aaa;\\n  content: '';\\n  float: right;\\n  margin-right: -1em;\\n  margin-top: -1px;\\n  height: 0.9em;\\n  width: 0.9em;\\n}\")},r.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+\"%\",a.superclass.prototype.updateDisplay.call(this)}}),a}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common),dat.controllers.FunctionController=function(e,t,n){var r=function e(n,r,i){e.superclass.call(this,n,r);var a=this;this.__button=document.createElement(\"div\"),this.__button.innerHTML=void 0===i?\"Fire\":i,t.bind(this.__button,\"click\",function(e){return e.preventDefault(),a.fire(),!1}),t.addClass(this.__button,\"button\"),this.domElement.appendChild(this.__button)};return r.superclass=e,n.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(e,t,n){var r=function e(n,r){e.superclass.call(this,n,r);var i=this;this.__prev=this.getValue(),this.__checkbox=document.createElement(\"input\"),this.__checkbox.setAttribute(\"type\",\"checkbox\"),t.bind(this.__checkbox,\"change\",function(){i.setValue(!i.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute(\"checked\",\"checked\"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var n=t.hex.toString(16);n.length<6;)n=\"0\"+n;return\"#\"+n}return\"rgba(\"+Math.round(t.r)+\",\"+Math.round(t.g)+\",\"+Math.round(t.b)+\",\"+t.a+\")\"}}(dat.utils.common),dat.color.interpret=function(e,t){var n,r,i=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:\"HEX\",hex:parseInt(\"0x\"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:\"HEX\",hex:parseInt(\"0x\"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);return null!==t&&{space:\"RGB\",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);return null!==t&&{space:\"RGB\",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:\"HEX\",hex:e,conversionName:\"HEX\"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:\"RGB\",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:\"RGB\",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:\"RGB\",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:\"RGB\",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:\"HSV\",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:\"HSV\",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(i,function(i){if(i.litmus(e))return t.each(i.conversions,function(i,a){if(n=i.read(e),!1===r&&!1!==n)return r=n,n.conversionName=a,n.conversion=i,t.BREAK}),t.BREAK}),r}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(e,t,n,r,i,a,o,s,l,c,u,d,f,p,h){e.inject(\".dg {\\n  /** Clear list styles */\\n  /* Auto-place container */\\n  /* Auto-placed GUI's */\\n  /* Line items that don't contain folders. */\\n  /** Folder names */\\n  /** Hides closed items */\\n  /** Controller row */\\n  /** Name-half (left) */\\n  /** Controller-half (right) */\\n  /** Controller placement */\\n  /** Shorter number boxes when slider is present. */\\n  /** Ensure the entire boolean and function row shows a hand */ }\\n  .dg ul {\\n    list-style: none;\\n    margin: 0;\\n    padding: 0;\\n    width: 100%;\\n    clear: both; }\\n  .dg.ac {\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    height: 0;\\n    z-index: 0; }\\n  .dg:not(.ac) .main {\\n    /** Exclude mains in ac so that we don't hide close button */\\n    overflow: hidden; }\\n  .dg.main {\\n    -webkit-transition: opacity 0.1s linear;\\n    -o-transition: opacity 0.1s linear;\\n    -moz-transition: opacity 0.1s linear;\\n    transition: opacity 0.1s linear; }\\n    .dg.main.taller-than-window {\\n      overflow-y: auto; }\\n      .dg.main.taller-than-window .close-button {\\n        opacity: 1;\\n        /* TODO, these are style notes */\\n        margin-top: -1px;\\n        border-top: 1px solid #2c2c2c; }\\n    .dg.main ul.closed .close-button {\\n      opacity: 1 !important; }\\n    .dg.main:hover .close-button,\\n    .dg.main .close-button.drag {\\n      opacity: 1; }\\n    .dg.main .close-button {\\n      /*opacity: 0;*/\\n      -webkit-transition: opacity 0.1s linear;\\n      -o-transition: opacity 0.1s linear;\\n      -moz-transition: opacity 0.1s linear;\\n      transition: opacity 0.1s linear;\\n      border: 0;\\n      position: absolute;\\n      line-height: 19px;\\n      height: 20px;\\n      /* TODO, these are style notes */\\n      cursor: pointer;\\n      text-align: center;\\n      background-color: #000; }\\n      .dg.main .close-button:hover {\\n        background-color: #111; }\\n  .dg.a {\\n    float: right;\\n    margin-right: 15px;\\n    overflow-x: hidden; }\\n    .dg.a.has-save > ul {\\n      margin-top: 27px; }\\n      .dg.a.has-save > ul.closed {\\n        margin-top: 0; }\\n    .dg.a .save-row {\\n      position: fixed;\\n      top: 0;\\n      z-index: 1002; }\\n  .dg li {\\n    -webkit-transition: height 0.1s ease-out;\\n    -o-transition: height 0.1s ease-out;\\n    -moz-transition: height 0.1s ease-out;\\n    transition: height 0.1s ease-out; }\\n  .dg li:not(.folder) {\\n    cursor: auto;\\n    height: 27px;\\n    line-height: 27px;\\n    overflow: hidden;\\n    padding: 0 4px 0 5px; }\\n  .dg li.folder {\\n    padding: 0;\\n    border-left: 4px solid rgba(0, 0, 0, 0); }\\n  .dg li.title {\\n    cursor: pointer;\\n    margin-left: -4px; }\\n  .dg .closed li:not(.title),\\n  .dg .closed ul li,\\n  .dg .closed ul li > * {\\n    height: 0;\\n    overflow: hidden;\\n    border: 0; }\\n  .dg .cr {\\n    clear: both;\\n    padding-left: 3px;\\n    height: 27px; }\\n  .dg .property-name {\\n    cursor: default;\\n    float: left;\\n    clear: left;\\n    width: 40%;\\n    overflow: hidden;\\n    text-overflow: ellipsis; }\\n  .dg .c {\\n    float: left;\\n    width: 60%; }\\n  .dg .c input[type=text] {\\n    border: 0;\\n    margin-top: 4px;\\n    padding: 3px;\\n    width: 100%;\\n    float: right; }\\n  .dg .has-slider input[type=text] {\\n    width: 30%;\\n    /*display: none;*/\\n    margin-left: 0; }\\n  .dg .slider {\\n    float: left;\\n    width: 66%;\\n    margin-left: -5px;\\n    margin-right: 0;\\n    height: 19px;\\n    margin-top: 4px; }\\n  .dg .slider-fg {\\n    height: 100%; }\\n  .dg .c input[type=checkbox] {\\n    margin-top: 9px; }\\n  .dg .c select {\\n    margin-top: 5px; }\\n  .dg .cr.function,\\n  .dg .cr.function .property-name,\\n  .dg .cr.function *,\\n  .dg .cr.boolean,\\n  .dg .cr.boolean * {\\n    cursor: pointer; }\\n  .dg .selector {\\n    display: none;\\n    position: absolute;\\n    margin-left: -9px;\\n    margin-top: 23px;\\n    z-index: 10; }\\n  .dg .c:hover .selector,\\n  .dg .selector.drag {\\n    display: block; }\\n  .dg li.save-row {\\n    padding: 0; }\\n    .dg li.save-row .button {\\n      display: inline-block;\\n      padding: 0px 6px; }\\n  .dg.dialogue {\\n    background-color: #222;\\n    width: 460px;\\n    padding: 15px;\\n    font-size: 13px;\\n    line-height: 15px; }\\n\\n/* TODO Separate style and structure */\\n#dg-new-constructor {\\n  padding: 10px;\\n  color: #222;\\n  font-family: Monaco, monospace;\\n  font-size: 10px;\\n  border: 0;\\n  resize: none;\\n  box-shadow: inset 1px 1px 1px #888;\\n  word-wrap: break-word;\\n  margin: 12px 0;\\n  display: block;\\n  width: 440px;\\n  overflow-y: scroll;\\n  height: 100px;\\n  position: relative; }\\n\\n#dg-local-explain {\\n  display: none;\\n  font-size: 11px;\\n  line-height: 17px;\\n  border-radius: 3px;\\n  background-color: #333;\\n  padding: 8px;\\n  margin-top: 10px; }\\n  #dg-local-explain code {\\n    font-size: 10px; }\\n\\n#dat-gui-save-locally {\\n  display: none; }\\n\\n/** Main type */\\n.dg {\\n  color: #eee;\\n  font: 11px 'Lucida Grande', sans-serif;\\n  text-shadow: 0 -1px 0 #111;\\n  /** Auto place */\\n  /* Controller row, <li> */\\n  /** Controllers */ }\\n  .dg.main {\\n    /** Scrollbar */ }\\n    .dg.main::-webkit-scrollbar {\\n      width: 5px;\\n      background: #1a1a1a; }\\n    .dg.main::-webkit-scrollbar-corner {\\n      height: 0;\\n      display: none; }\\n    .dg.main::-webkit-scrollbar-thumb {\\n      border-radius: 5px;\\n      background: #676767; }\\n  .dg li:not(.folder) {\\n    background: #1a1a1a;\\n    border-bottom: 1px solid #2c2c2c; }\\n  .dg li.save-row {\\n    line-height: 25px;\\n    background: #dad5cb;\\n    border: 0; }\\n    .dg li.save-row select {\\n      margin-left: 5px;\\n      width: 108px; }\\n    .dg li.save-row .button {\\n      margin-left: 5px;\\n      margin-top: 1px;\\n      border-radius: 2px;\\n      font-size: 9px;\\n      line-height: 7px;\\n      padding: 4px 4px 5px 4px;\\n      background: #c5bdad;\\n      color: #fff;\\n      text-shadow: 0 1px 0 #b0a58f;\\n      box-shadow: 0 -1px 0 #b0a58f;\\n      cursor: pointer; }\\n      .dg li.save-row .button.gears {\\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\\n        height: 7px;\\n        width: 8px; }\\n      .dg li.save-row .button:hover {\\n        background-color: #bab19e;\\n        box-shadow: 0 -1px 0 #b0a58f; }\\n  .dg li.folder {\\n    border-bottom: 0; }\\n  .dg li.title {\\n    padding-left: 16px;\\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\\n    cursor: pointer;\\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\\n  .dg .closed li.title {\\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\\n  .dg .cr.boolean {\\n    border-left: 3px solid #806787; }\\n  .dg .cr.function {\\n    border-left: 3px solid #e61d5f; }\\n  .dg .cr.number {\\n    border-left: 3px solid #2fa1d6; }\\n    .dg .cr.number input[type=text] {\\n      color: #2fa1d6; }\\n  .dg .cr.string {\\n    border-left: 3px solid #1ed36f; }\\n    .dg .cr.string input[type=text] {\\n      color: #1ed36f; }\\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\\n    background: #111; }\\n  .dg .c input[type=text] {\\n    background: #303030;\\n    outline: none; }\\n    .dg .c input[type=text]:hover {\\n      background: #3c3c3c; }\\n    .dg .c input[type=text]:focus {\\n      background: #494949;\\n      color: #fff; }\\n  .dg .c .slider {\\n    background: #303030;\\n    cursor: ew-resize; }\\n  .dg .c .slider-fg {\\n    background: #2fa1d6; }\\n  .dg .c .slider:hover {\\n    background: #3c3c3c; }\\n    .dg .c .slider:hover .slider-fg {\\n      background: #44abda; }\\n\");var m,g,_=\"Default\",v=function(){try{return\"localStorage\"in window&&null!==window.localStorage}catch(e){return!1}}(),b=!0,y=!1,w=[],x=function e(t){var n=this;this.domElement=document.createElement(\"div\"),this.__ul=document.createElement(\"ul\"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,\"dg\"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=h.defaults(t,{autoPlace:!0,width:e.DEFAULT_WIDTH}),t=h.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),h.isUndefined(t.load)?t.load={preset:_}:t.preset&&(t.load.preset=t.preset),h.isUndefined(t.parent)&&t.hideable&&w.push(this),t.resizable=h.isUndefined(t.parent)&&t.resizable,t.autoPlace&&h.isUndefined(t.scrollable)&&(t.scrollable=!0);var r,i=v&&\"true\"===localStorage.getItem(O(this,\"isLocal\"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:t.load.preset},set:function(e){n.parent?n.getRoot().preset=e:t.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,A(n,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,o&&(o.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(r){t.closed=r,t.closed?p.addClass(n.__ul,e.CLASS_CLOSED):p.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=r?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return i},set:function(e){v&&(i=e,e?p.bind(window,\"unload\",r):p.unbind(window,\"unload\",r),localStorage.setItem(O(n,\"isLocal\"),e))}}}),h.isUndefined(t.parent)){if(t.closed=!1,p.addClass(this.domElement,e.CLASS_MAIN),p.makeSelectable(this.domElement,!1),v&&i){n.useLocalStorage=!0;var a=localStorage.getItem(O(this,\"gui\"));a&&(t.load=JSON.parse(a))}this.__closeButton=document.createElement(\"div\"),this.__closeButton.innerHTML=e.TEXT_CLOSED,p.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,\"click\",function(){n.closed=!n.closed})}else{void 0===t.closed&&(t.closed=!0);var o=document.createTextNode(t.name);p.addClass(o,\"controller-name\");var s=E(n,o);p.addClass(this.__ul,e.CLASS_CLOSED),p.addClass(s,\"title\"),p.bind(s,\"click\",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),t.closed||(this.closed=!1)}t.autoPlace&&(h.isUndefined(t.parent)&&(b&&(g=document.createElement(\"div\"),p.addClass(g,\"dg\"),p.addClass(g,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(g),b=!1),g.appendChild(this.domElement),p.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||A(n,t.width)),p.bind(window,\"resize\",function(){n.onResize()}),p.bind(this.__ul,\"webkitTransitionEnd\",function(){n.onResize()}),p.bind(this.__ul,\"transitionend\",function(){n.onResize()}),p.bind(this.__ul,\"oTransitionEnd\",function(){n.onResize()}),this.onResize(),t.resizable&&P(this),r=function(){v&&\"true\"===localStorage.getItem(O(n,\"isLocal\"))&&localStorage.setItem(O(n,\"gui\"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=r;n.getRoot();t.parent||function(){var e=n.getRoot();e.width+=1,h.defer(function(){e.width-=1})}()};function C(e,t,n,c){if(void 0===t[n])throw new Error(\"Object \"+t+' has no property \"'+n+'\"');var d;if(c.color)d=new u(t,n);else{var f=[t,n].concat(c.factoryArgs);d=r.apply(e,f)}c.before instanceof i&&(c.before=c.before.__li),S(e,d),p.addClass(d.domElement,\"c\");var m=document.createElement(\"span\");p.addClass(m,\"property-name\"),m.innerHTML=d.property;var g=document.createElement(\"div\");g.appendChild(m),g.appendChild(d.domElement);var _=E(e,g,c.before),v=d.getValue();if(p.addClass(_,x.CLASS_CONTROLLER_ROW),p.addClass(_,typeof v),\"string\"==typeof v){var b=v[0],y=v[v.length-1];(\"[\"===b&&\"]\"===y||\"{\"===b&&\"}\"===y)&&p.addClass(_,\"text-box\")}return function(e,t,n){if(n.__li=t,n.__gui=e,h.extend(n,{options:function(t){return arguments.length>1?(n.remove(),C(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[h.toArray(arguments)]})):h.isArray(t)||h.isObject(t)?(n.remove(),C(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof l){var r=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});h.each([\"updateDisplay\",\"onChange\",\"onFinishChange\"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),i.apply(r,e)}}),p.addClass(t,\"has-slider\"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof s){var i=function(t){return h.isNumber(n.__min)&&h.isNumber(n.__max)?(n.remove(),C(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=h.compose(i,n.min),n.max=h.compose(i,n.max)}else n instanceof a?(p.bind(t,\"click\",function(){p.fakeEvent(n.__checkbox,\"click\")}),p.bind(n.__checkbox,\"click\",function(e){e.stopPropagation()})):n instanceof o?(p.bind(t,\"click\",function(){p.fakeEvent(n.__button,\"click\")}),p.bind(t,\"mouseover\",function(){p.addClass(n.__button,\"hover\")}),p.bind(t,\"mouseout\",function(){p.removeClass(n.__button,\"hover\")})):n instanceof u&&(p.addClass(t,\"color\"),n.updateDisplay=h.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=h.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&M(e.getRoot(),!0),t},n.setValue)}(e,_,d),e.__controllers.push(d),d}function E(e,t,n){var r=document.createElement(\"li\");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function S(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!=r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var a,o=n.load.remembered;if(o[e.preset])a=o[e.preset];else{if(!o[_])return;a=o[_]}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function O(e,t){return document.location.href+\".\"+t}function P(e){var t;function n(n){return n.preventDefault(),t=n.clientX,p.addClass(e.__closeButton,x.CLASS_DRAG),p.bind(window,\"mousemove\",r),p.bind(window,\"mouseup\",i),!1}function r(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function i(){p.removeClass(e.__closeButton,x.CLASS_DRAG),p.unbind(window,\"mousemove\",r),p.unbind(window,\"mouseup\",i)}e.__resize_handle=document.createElement(\"div\"),h.extend(e.__resize_handle.style,{width:\"6px\",marginLeft:\"-3px\",height:\"200px\",cursor:\"ew-resize\",position:\"absolute\"}),p.bind(e.__resize_handle,\"mousedown\",n),p.bind(e.__closeButton,\"mousedown\",n),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function A(e,t){e.domElement.style.width=t+\"px\",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+\"px\"),e.__closeButton&&(e.__closeButton.style.width=t+\"px\")}function k(e,t){var n={};return h.each(e.__rememberedObjects,function(r,i){var a={},o=e.__rememberedObjectIndecesToControllers[i];h.each(o,function(e,n){a[n]=t?e.initialValue:e.getValue()}),n[i]=a}),n}function T(e,t,n){var r=document.createElement(\"option\");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function M(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+\"*\":n.value}return x.toggleHide=function(){y=!y,h.each(w,function(e){e.domElement.style.zIndex=y?-999:999,e.domElement.style.opacity=y?0:1})},x.CLASS_AUTO_PLACE=\"a\",x.CLASS_AUTO_PLACE_CONTAINER=\"ac\",x.CLASS_MAIN=\"main\",x.CLASS_CONTROLLER_ROW=\"cr\",x.CLASS_TOO_TALL=\"taller-than-window\",x.CLASS_CLOSED=\"closed\",x.CLASS_CLOSE_BUTTON=\"close-button\",x.CLASS_DRAG=\"drag\",x.DEFAULT_WIDTH=245,x.TEXT_CLOSED=\"Close Controls\",x.TEXT_OPEN=\"Open Controls\",p.bind(window,\"keydown\",function(e){\"text\"===document.activeElement.type||72!==e.which&&72!=e.keyCode||x.toggleHide()},!1),h.extend(x.prototype,{add:function(e,t){return C(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return C(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;h.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&g.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name \"'+e+'\"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new x(t);this.__folders[e]=n;var r=E(this,n.domElement);return r.id=e,p.addClass(r,\"folder\"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=p.getOffset(e.__ul).top,n=0;h.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=p.getHeight(t))}),window.innerHeight-t-20<n?(p.addClass(e.domElement,x.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+\"px\"):(p.removeClass(e.domElement,x.CLASS_TOO_TALL),e.__ul.style.height=\"auto\")}e.__resize_handle&&h.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+\"px\"}),e.__closeButton&&(e.__closeButton.style.width=e.width+\"px\")},remember:function(){if(h.isUndefined(m)&&((m=new f).domElement.innerHTML='<div id=\"dg-save\" class=\"dg dialogue\">\\n\\n  Here\\'s the new load parameter for your <code>GUI</code>\\'s constructor:\\n\\n  <textarea id=\"dg-new-constructor\"></textarea>\\n\\n  <div id=\"dg-save-locally\">\\n\\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>\\'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n      \\n    </div>\\n    \\n  </div>\\n\\n</div>'),this.parent)throw new Error(\"You can only call remember on a top level GUI.\");var e=this;h.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement(\"li\");p.addClass(e.domElement,\"has-save\"),e.__ul.insertBefore(t,e.__ul.firstChild),p.addClass(t,\"save-row\");var n=document.createElement(\"span\");n.innerHTML=\"&nbsp;\",p.addClass(n,\"button gears\");var r=document.createElement(\"span\");r.innerHTML=\"Save\",p.addClass(r,\"button\"),p.addClass(r,\"save\");var i=document.createElement(\"span\");i.innerHTML=\"New\",p.addClass(i,\"button\"),p.addClass(i,\"save-as\");var a=document.createElement(\"span\");a.innerHTML=\"Revert\",p.addClass(a,\"button\"),p.addClass(a,\"revert\");var o=e.__preset_select=document.createElement(\"select\");e.load&&e.load.remembered?h.each(e.load.remembered,function(t,n){T(e,n,n==e.preset)}):T(e,_,!1);if(p.bind(o,\"change\",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(o),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(a),v){var s=function(){c.style.display=e.useLocalStorage?\"block\":\"none\"},l=document.getElementById(\"dg-save-locally\"),c=document.getElementById(\"dg-local-explain\");l.style.display=\"block\";var u=document.getElementById(\"dg-local-storage\");\"true\"===localStorage.getItem(O(e,\"isLocal\"))&&u.setAttribute(\"checked\",\"checked\"),s(),p.bind(u,\"change\",function(){e.useLocalStorage=!e.useLocalStorage,s()})}var d=document.getElementById(\"dg-new-constructor\");p.bind(d,\"keydown\",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||m.hide()}),p.bind(n,\"click\",function(){d.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),m.show(),d.focus(),d.select()}),p.bind(r,\"click\",function(){e.save()}),p.bind(i,\"click\",function(){var t=prompt(\"Enter a new preset name.\");t&&e.saveAs(t)}),p.bind(a,\"click\",function(){e.revert()})}(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&A(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=k(this)),e.folders={},h.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=k(this),M(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[_]=k(this,!0)),this.load.remembered[e]=k(this),this.preset=e,T(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){h.each(this.__controllers,function(t){this.getRoot().load.remembered?S(e||this.getRoot(),t):t.setValue(t.initialValue)},this),h.each(this.__folders,function(e){e.revert(e)}),e||M(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&function e(t){0!=t.length&&d(function(){e(t)});h.each(t,function(e){e.updateDisplay()})}(this.__listening)}}),x}(dat.utils.css,0,0,dat.controllers.factory=function(e,t,n,r,i,a,o){return function(s,l){var c=s[l];if(o.isArray(arguments[2])||o.isObject(arguments[2]))return new e(s,l,arguments[2]);if(o.isNumber(c))return o.isNumber(arguments[2])&&o.isNumber(arguments[3])?new n(s,l,arguments[2],arguments[3]):new t(s,l,{min:arguments[2],max:arguments[3]});if(o.isString(c)){var u=c[0],d=c[c.length-1];return new r(\"[\"===u&&\"]\"===d||\"{\"===u&&\"}\"===d,s,l)}return o.isFunction(c)?new i(s,l,\"\"):o.isBoolean(c)?new a(s,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(e,t,n){var r=function e(n,r,i){e.superclass.call(this,r,i);var a=this;function o(){a.setValue(a.__input.value),n&&a.__onFinishChange.call(a,a.getValue())}this.__input=n?document.createElement(\"textarea\"):document.createElement(\"input\"),this.__input.setAttribute(\"type\",\"text\"),n?(this.__btn=document.createElement(\"button\"),this.__btn.innerHTML=\"Update\",t.bind(this.__btn,\"click\",o)):(t.bind(this.__input,\"keyup\",o),t.bind(this.__input,\"change\",o),t.bind(this.__input,\"blur\",function(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}),t.bind(this.__input,\"keydown\",function(e){13===e.keyCode&&this.blur()})),this.updateDisplay(),this.domElement.appendChild(this.__input),n&&this.domElement.appendChild(this.__btn)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(e,t,n,r,i){var a=function e(a,o){e.superclass.call(this,a,o),this.__color=new n(this.getValue()),this.__temp=new n(0);var l=this;this.domElement=document.createElement(\"div\"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement(\"div\"),this.__selector.className=\"selector\",this.__saturation_field=document.createElement(\"div\"),this.__saturation_field.className=\"saturation-field\",this.__field_knob=document.createElement(\"div\"),this.__field_knob.className=\"field-knob\",this.__field_knob_border=\"2px solid \",this.__hue_knob=document.createElement(\"div\"),this.__hue_knob.className=\"hue-knob\",this.__hue_field=document.createElement(\"div\"),this.__hue_field.className=\"hue-field\",this.__input=document.createElement(\"input\"),this.__input.type=\"text\",this.__input_textShadow=\"0 1px 1px \",t.bind(this.__input,\"keydown\",function(e){13===e.keyCode&&f.call(this)}),t.bind(this.__input,\"blur\",f),t.bind(this.__selector,\"mousedown\",function(e){t.addClass(this,\"drag\").bind(window,\"mouseup\",function(e){t.removeClass(l.__selector,\"drag\")})});var c=document.createElement(\"div\");function u(e){h(e),t.bind(window,\"mousemove\",h),t.bind(window,\"mouseup\",d)}function d(){t.unbind(window,\"mousemove\",h),t.unbind(window,\"mouseup\",d)}function f(){var e=r(this.value);!1!==e?(l.__color.__state=e,l.setValue(l.__color.toOriginal())):this.value=l.__color.toString()}function p(){t.unbind(window,\"mousemove\",m),t.unbind(window,\"mouseup\",p)}function h(e){e.preventDefault();var n=t.getWidth(l.__saturation_field),r=t.getOffset(l.__saturation_field),i=(e.clientX-r.left+document.body.scrollLeft)/n,a=1-(e.clientY-r.top+document.body.scrollTop)/n;return a>1?a=1:a<0&&(a=0),i>1?i=1:i<0&&(i=0),l.__color.v=a,l.__color.s=i,l.setValue(l.__color.toOriginal()),!1}function m(e){e.preventDefault();var n=t.getHeight(l.__hue_field),r=t.getOffset(l.__hue_field),i=1-(e.clientY-r.top+document.body.scrollTop)/n;return i>1?i=1:i<0&&(i=0),l.__color.h=360*i,l.setValue(l.__color.toOriginal()),!1}i.extend(this.__selector.style,{width:\"122px\",height:\"102px\",padding:\"3px\",backgroundColor:\"#222\",boxShadow:\"0px 1px 3px rgba(0,0,0,0.3)\"}),i.extend(this.__field_knob.style,{position:\"absolute\",width:\"12px\",height:\"12px\",border:this.__field_knob_border+(this.__color.v<.5?\"#fff\":\"#000\"),boxShadow:\"0px 1px 3px rgba(0,0,0,0.5)\",borderRadius:\"12px\",zIndex:1}),i.extend(this.__hue_knob.style,{position:\"absolute\",width:\"15px\",height:\"2px\",borderRight:\"4px solid #fff\",zIndex:1}),i.extend(this.__saturation_field.style,{width:\"100px\",height:\"100px\",border:\"1px solid #555\",marginRight:\"3px\",display:\"inline-block\",cursor:\"pointer\"}),i.extend(c.style,{width:\"100%\",height:\"100%\",background:\"none\"}),s(c,\"top\",\"rgba(0,0,0,0)\",\"#000\"),i.extend(this.__hue_field.style,{width:\"15px\",height:\"100px\",display:\"inline-block\",border:\"1px solid #555\",cursor:\"ns-resize\"}),function(e){e.style.background=\"\",e.style.cssText+=\"background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);\",e.style.cssText+=\"background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",e.style.cssText+=\"background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",e.style.cssText+=\"background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\",e.style.cssText+=\"background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);\"}(this.__hue_field),i.extend(this.__input.style,{outline:\"none\",textAlign:\"center\",color:\"#fff\",border:0,fontWeight:\"bold\",textShadow:this.__input_textShadow+\"rgba(0,0,0,0.7)\"}),t.bind(this.__saturation_field,\"mousedown\",u),t.bind(this.__field_knob,\"mousedown\",u),t.bind(this.__hue_field,\"mousedown\",function(e){m(e),t.bind(window,\"mousemove\",m),t.bind(window,\"mouseup\",p)}),this.__saturation_field.appendChild(c),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=e,i.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(!1!==e){var t=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(e[n])&&!i.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,o=255-a;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+\"px\",marginTop:100*(1-this.__color.v)-7+\"px\",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+\"rgb(\"+a+\",\"+a+\",\"+a+\")\"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+\"px\",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,\"left\",\"#fff\",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:\"rgb(\"+a+\",\"+a+\",\"+a+\")\",textShadow:this.__input_textShadow+\"rgba(\"+o+\",\"+o+\",\"+o+\",.7)\"})}});var o=[\"-moz-\",\"-o-\",\"-webkit-\",\"-ms-\",\"\"];function s(e,t,n,r){e.style.background=\"\",i.each(o,function(i){e.style.cssText+=\"background: \"+i+\"linear-gradient(\"+t+\", \"+n+\" 0%, \"+r+\" 100%); \"})}return a}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(e,t,n,r){var i=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw\"Failed to interpret color arguments\";this.__state.a=this.__state.a||1};function a(e,t,n){Object.defineProperty(e,t,{get:function(){return\"RGB\"===this.__state.space?this.__state[t]:(s(this,t,n),this.__state[t])},set:function(e){\"RGB\"!==this.__state.space&&(s(this,t,n),this.__state.space=\"RGB\"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return\"HSV\"===this.__state.space?this.__state[t]:(l(this),this.__state[t])},set:function(e){\"HSV\"!==this.__state.space&&(l(this),this.__state.space=\"HSV\"),this.__state[t]=e}})}function s(e,n,i){if(\"HEX\"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if(\"HSV\"!==e.__state.space)throw\"Corrupted color state\";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function l(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}return i.COMPONENTS=[\"r\",\"g\",\"b\",\"h\",\"s\",\"v\",\"hex\",\"a\"],r.extend(i.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(i.prototype,\"r\",2),a(i.prototype,\"g\",1),a(i.prototype,\"b\",0),o(i.prototype,\"h\"),o(i.prototype,\"s\"),o(i.prototype,\"v\"),Object.defineProperty(i.prototype,\"a\",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(i.prototype,\"hex\",{get:function(){return\"HEX\"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space=\"HEX\",this.__state.hex=e}}),i}(dat.color.interpret,dat.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,a],[o,n,a],[a,n,s],[a,o,n],[s,a,n],[n,a,o]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r,i=Math.min(e,t,n),a=Math.max(e,t,n),o=a-i;return 0==a?{h:NaN,s:0,v:0}:(r=e==a?(t-n)/o:t==a?2+(n-e)/o:4+(e-t)/o,(r/=6)<0&&(r+=1),{h:360*r,s:o/a,v:a/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},dat.dom.CenteredDiv=function(e,t){var n=function(){this.backgroundElement=document.createElement(\"div\"),t.extend(this.backgroundElement.style,{backgroundColor:\"rgba(0,0,0,0.8)\",top:0,left:0,display:\"none\",zIndex:\"1000\",opacity:0,WebkitTransition:\"opacity 0.2s linear\"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position=\"fixed\",this.domElement=document.createElement(\"div\"),t.extend(this.domElement.style,{position:\"fixed\",display:\"none\",zIndex:\"1001\",opacity:0,WebkitTransition:\"-webkit-transform 0.2s ease-out, opacity 0.2s linear\"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,\"click\",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display=\"block\",this.domElement.style.display=\"block\",this.domElement.style.opacity=0,this.domElement.style.webkitTransform=\"scale(1.1)\",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform=\"scale(1)\"})},n.prototype.hide=function(){var t=this,n=function n(){t.domElement.style.display=\"none\",t.backgroundElement.style.display=\"none\",e.unbind(t.domElement,\"webkitTransitionEnd\",n),e.unbind(t.domElement,\"transitionend\",n),e.unbind(t.domElement,\"oTransitionEnd\",n)};e.bind(this.domElement,\"webkitTransitionEnd\",n),e.bind(this.domElement,\"transitionend\",n),e.bind(this.domElement,\"oTransitionEnd\",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform=\"scale(1.1)\"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+\"px\",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+\"px\"},n}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common)},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[\"$\"+e]=this._callbacks[\"$\"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[\"$\"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[\"$\"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[\"$\"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[\"$\"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){\"use strict\";var r=n(17);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||\"object\"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case\"deadline\":this._timeout=e.deadline;break;case\"response\":this._responseTimeout=e.response;break;default:console.warn(\"Unknown timeout option\",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var a=[\"ECONNRESET\",\"ETIMEDOUT\",\"EADDRINFO\",\"ESOCKETTIMEDOUT\"];i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~a.indexOf(e.code))return!0;if(e.timeout&&\"ECONNABORTED\"==e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn(\"Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises\"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if(\"function\"!=typeof e)throw Error(\"Callback required\");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error(\".field(name, val) name can not be empty\");if(this._data&&console.error(\".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()\"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null===t||void 0===t)throw new Error(\".field(name, val) val can not be empty\");return\"boolean\"==typeof t&&(t=\"\"+t),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit(\"abort\"),this)},i.prototype._auth=function(e,t,n,r){switch(n.type){case\"basic\":this.set(\"Authorization\",\"Basic \"+r(e+\":\"+t));break;case\"auto\":this.username=e,this.password=t;break;case\"bearer\":this.set(\"Authorization\",\"Bearer \"+e)}return this},i.prototype.withCredentials=function(e){return void 0==e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if(\"number\"!=typeof e)throw TypeError(\"Invalid argument\");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=r(e),n=this._header[\"content-type\"];if(this._formData&&console.error(\".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()\"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error(\"Can't merge these send calls\");if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else\"string\"==typeof e?(n||this.type(\"form\"),n=this._header[\"content-type\"],this._data=\"application/x-www-form-urlencoded\"==n?this._data?this._data+\"&\"+e:e:(this._data||\"\")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type(\"json\"),this)},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join(\"&\");if(e&&(this.url+=(this.url.indexOf(\"?\")>=0?\"&\":\"?\")+e),this._query.length=0,this._sort){var t=this.url.indexOf(\"?\");if(t>=0){var n=this.url.substring(t+1).split(\"&\");\"function\"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+\"?\"+n.join(\"&\")}}},i.prototype._appendQueryString=function(){console.trace(\"Unsupported\")},i.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+\"ms exceeded\");r.timeout=t,r.code=\"ECONNABORTED\",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError(\"Timeout of \",e._timeout,\"ETIME\")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError(\"Response timeout of \",e._responseTimeout,\"ETIMEDOUT\")},this._responseTimeout))}},function(e,t,n){\"use strict\";var r=n(35);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.get=function(e){return this.header[e.toLowerCase()]},i.prototype._setHeaderProperties=function(e){var t=e[\"content-type\"]||\"\";this.type=r.type(t);var n=r.params(t);for(var i in n)this[i]=n[i];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},i.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e}},function(e,t,n){\"use strict\";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},t.cleanHeader=function(e,t){return delete e[\"content-type\"],delete e[\"content-length\"],delete e[\"transfer-encoding\"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}[\"use\",\"on\",\"once\",\"set\",\"query\",\"type\",\"accept\",\"auth\",\"withCredentials\",\"sortQuery\",\"retry\",\"ok\",\"redirects\",\"timeout\",\"buffer\",\"serialize\",\"parse\",\"ca\",\"key\",\"pfx\",\"cert\"].forEach(function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}}),n.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=n},function(e,t,n){\"use strict\";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.__esModule=!0,t.default=void 0;var i=function(){function e(){}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,null,[{key:\"orientation\",get:function(){return window.innerWidth>window.innerHeight?\"landscape\":\"portrait\"}},{key:\"dimensions\",get:function(){return{width:window.innerWidth,height:window.innerHeight}}}]),e}();Object.defineProperty(i,\"pixelRatio\",{configurable:!0,enumerable:!0,writable:!0,value:window.devicePixelRatio||\"unknown\"}),Object.defineProperty(i,\"init\",{configurable:!0,enumerable:!0,writable:!0,value:function(){console.log(\"Device.init()\");var e=this;e.agentString=navigator.userAgent,e._getType(),e._getBrandAndOS(),e._getBrowser(),\"desktop\"!==e.type&&\"windows\"===e.os&&e.osVersion<=8&&\"ie\"===e.browser&&e.browserVersion<12&&(console.log(\"You appear to be on Windows 7 or 8 using Internet Explorer 11 or under. You also appear to be on a touchscreen device. We will assume you're actually on a desktop, since it's extremely unlikely you're on a tablet or mobile device using this specific operating system and browser.\"),e.type=\"desktop\");var t=Array(70).join(\"-\"),n=\"\\n\"+t;for(var r in e)e.hasOwnProperty(r)&&\"function\"!=typeof e[r]&&(n+=\"\\n\"+r+\": \"+e[r]);n+=\"\\n\"+t,console.log(n)}}),Object.defineProperty(i,\"_getType\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=this,t=/(android|mobile)/gi.exec(e.agentString),n=/(tablet|touch)/gi.exec(e.agentString),r=/(ipad)/gi.exec(e.agentString);e.type=\"desktop\",t&&(e.type=\"mobile\"),n&&(e.type=\"tablet\"),r&&(e.type=\"tablet\")}}),Object.defineProperty(i,\"_getBrandAndOS\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=this,t=e.agentString.match(/ip(hone|od|ad)|mac/gi);if(t){e.brand=\"apple\",e.product=t[0].toLowerCase();var n=/(OS\\s)(\\X\\s|)([\\d\\.\\_]+)/gi.exec(e.agentString);return e.os=\"\"==n[2]?\"ios\":\"osx\",void(e.osVersion=n[3].replace(/\\_/g,\".\"))}var r=/(android)\\/?\\s*([0-9\\.]+)/gi.exec(e.agentString);if(r)return e.brand=e.product=e.os=r[1].toLowerCase(),e._checkForSpecial(\"product\",[\"pixel 2\"],e.agentString.split(\"(\")[1].split(\")\")[0]),void(e.osVersion=r[2]);var i=/(windows\\snt\\s|windows\\sphone)\\/?\\s*([0-9\\.]+)/gi.exec(e.agentString);if(i){switch(e.brand=\"microsoft\",e.os=\"windows\",i[2]){case\"5.2\":e.osVersion=\"xp\";break;case\"6.0\":e.osVersion=\"vista\";break;case\"6.1\":e.osVersion=\"7\";break;case\"6.2\":e.osVersion=\"8\";break;case\"6.3\":e.osVersion=\"8.1\";break;case\"10.0\":e.osVersion=\"10\";break;default:e.osVersion=i[2]}return e.product=i[1].toLowerCase(),void(e.product.match(/\\snt/i)&&(e.product=\"pc\"))}e.agentString.match(/(blackberry|bb10|playbook)/i)&&(e.brand=e.product=e.os=\"blackberry\",e.osVersion=/(version)\\/?\\s*([0-9\\.]+)/gi.exec(e.agentString)[2])}}),Object.defineProperty(i,\"_getBrowser\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=this,t=/(edge(?=\\/))\\/?\\s*([0-9\\.]+)/i.exec(e.agentString);if(t||(t=e.agentString.match(/(fban|fbav|opera|chrome|crios|safari|firefox|msie|trident(?=\\/))\\/?\\s*([0-9\\.]+)/i)),!t||t.length<3){switch(console.log(\"we received no browser data, so we are setting it to the default of the device\"),e.os){case\"ios\":e.browser=\"safari\";break;case\"windows\":e.browser=\"trident\";break;default:e.browser=\"chrome\"}e.browserVersion=\"os-default\"}else switch(console.log(\"we received browser data\"),e.browser=t[1].toLowerCase(),e.browserVersion=t[2],e.browser){case\"trident\":(n=/\\brv:+(\\d+)/g.exec(e.agentString))&&(e.browserVersion=n[1]);case\"msie\":e.browser=\"ie\";break;case\"crios\":e.browser=\"chrome\";break;case\"safari\":(n=e.agentString.match(/\\sversion\\/([0-9\\.]+)\\s/i))&&(e.browserVersion=n[1]);break;case\"chrome\":var n;(n=e.agentString.match(/\\b(OPR)\\/([0-9\\.]+)/i))&&(e.browser=\"opera\",e.browserVersion=n[2])}}}),Object.defineProperty(i,\"_checkForSpecial\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t,n){for(var r,i=0;i<t.length;i++)if(r=t[i].toLowerCase(),n.match(new RegExp(r,\"i\"))){this[e]=r;break}}});var a=i;t.default=a},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=function(){var e=this;e.identity=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e.data=new Float32Array(e.identity)};r.prototype={clear:function(){this.data.set(this.identity)},rotateX:function(e){var t=this,n=Math.cos(e).toFixed(15),r=Math.sin(e).toFixed(15),i=new Float32Array(t.identity);return i[5]=n,i[6]=r,i[9]=-r,i[10]=n,t.multiply(i),t},rotateY:function(e){var t=this,n=Math.cos(e).toFixed(15),r=Math.sin(e).toFixed(15),i=new Float32Array(t.identity);return i[0]=n,i[2]=-r,i[8]=r,i[10]=n,t.multiply(i),t},rotateZ:function(e){var t=this,n=Math.cos(e).toFixed(15),r=Math.sin(e).toFixed(15),i=new Float32Array(t.identity);return i[0]=n,i[1]=r,i[4]=-r,i[5]=n,t.multiply(i),t},scale:function(e,t){var n=this,r=new Float32Array(n.identity);return r[0]=e,r[5]=t,n.multiply(r),n},skew:function(e,t){var n=this,r=new Float32Array(n.identity);return r[1]=Math.tan(t)||0,r[4]=Math.tan(e)||0,console.log(r[1],r[4]),n.multiply(r),n},translate:function(e,t,n){var r=new Float32Array(this.identity);return r[12]=e||0,r[13]=t||0,r[14]=n||0,this.multiply(r),this},multiply:function(e){var t=this,n=new Float32Array(t.data);t.data[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8],t.data[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9],t.data[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10],t.data[3]=0,t.data[4]=n[4]*e[0]+n[5]*e[4]+n[6]*e[8],t.data[5]=n[4]*e[1]+n[5]*e[5]+n[6]*e[9],t.data[6]=n[4]*e[2]+n[5]*e[6]+n[6]*e[10],t.data[7]=0,t.data[8]=n[8]*e[0]+n[9]*e[4]+n[10]*e[8],t.data[9]=n[8]*e[1]+n[9]*e[5]+n[10]*e[9],t.data[10]=n[8]*e[2]+n[9]*e[6]+n[10]*e[10],t.data[11]=0,t.data[12]=n[12]*e[0]+n[13]*e[4]+n[14]*e[8]+e[12],t.data[13]=n[12]*e[1]+n[13]*e[5]+n[14]*e[9]+e[13],t.data[14]=n[12]*e[2]+n[13]*e[6]+n[14]*e[10]+e[14],t.data[15]=1},getCss:function(){var e=this;return\"matrix3d(\"+e.data[0]+\",\"+e.data[1]+\",\"+e.data[2]+\", 0,\"+e.data[4]+\",\"+e.data[5]+\",\"+e.data[6]+\", 0,\"+e.data[8]+\",\"+e.data[9]+\",\"+e.data[10]+\", 0,\"+e.data[12]+\",\"+e.data[13]+\",\"+e.data[14]+\", 1)\"}},r.cssToData=function(e){return e.match(/\\(([^\\)]+)\\)/)[1].replace(/\\s/g,\"\").split(\",\").map(Number)};var i=r;t.default=i},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(19)),i=n(0);var a=function(e){var t=this;e=e||{},t.rotation=e.rotation||0,t.x=e.x||0,t.y=e.y||0,t.scaleX=e.scaleX||1,t.scaleY=e.scaleY||1,t.originX=e.originX||0,t.originY=e.originY||0,t.points=e.points||[],t.calculatedPoints=[];var n=new r.default;function a(e){var r=e[0]-t.originX,i=e[1]-t.originY,a=r*n.data[0]+i*n.data[3]+n.data[2],o=r*n.data[1]+i*n.data[4]+n.data[5];return[a+=t.originX,o+=t.originY]}console.log(n),t.addPoint=function(e){t.points.push(e)},t.addPoints=function(e){t.points=t.points.concate(e)},t.update=function(e){n.clear(),n.translate(t.x,t.y),n.scale(t.scaleX,t.scaleY),n.rotate(i.MathUtils.toRadians(t.rotation)),t.calculatedPoints=[];for(var r=0;r<this.points.length;r++){var o=a(t.points[r]);t.calculatedPoints.push(o)}return e&&e(t.calculatedPoints),t.calculatedPoints}};t.default=a},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=new function(){this.gpsSuccessCallback,this.gpsFailCallback,this.getGPSData=function(e,t){navigator.geolocation?(r.gpsSuccessCallback=e,r.gpsFailCallback=t,navigator.geolocation.getCurrentPosition(r.onLocationRetrieved,r.onLocationFailed)):console.log(\"geolocation not available\")},this.onLocationRetrieved=function(e){r.gpsSuccessCallback(e.coords)},this.onLocationFailed=function(e){switch(console.log(\"Error retrieving location data\"),e.code){case 0:console.log(\"0 - unknown error\");break;case 1:console.log(\"1 - permission denied\");break;case 2:console.log(\"2 - position unavailable (error response from locaton\");break;case 3:console.log(\"3 - timed out\")}r.gpsFailCallback&&r.gpsFailCallback(e)}},i=r;t.default=i},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=function(){var e,t,n,r,i,a=0,o=0,s=0,l=0,c=!0,u=1;function d(d){switch(window.orientation){case-90:o=d.gamma,a=-d.beta;break;case 90:o=-d.gamma,a=d.beta;break;case 180:o=-d.beta,a=-d.gamma;break;default:o=d.beta,a=d.gamma}c&&(s=a,l=o,c=!1),a-=s,o-=l,a*=u,o*=u,e&&a<e&&(a=e),t&&a>t&&(a=t),n&&o<n&&(o=n),r&&o>r&&(o=r),i(a,o)}return{ax:a,ay:o,callibrate:function(){c=!0},setSpeedLimits:function(i,a,o,s){e=i,t=a,n=o,r=s},setSpeedMultiplier:function(e){u=e<=0?1:e},activate:function(e){i=e,window.addEventListener(\"deviceorientation\",d,!1)},deactivate:function(){window.removeEventListener(\"deviceorientation\",d,!1)}}}();t.default=r},function(e,t,n){\"use strict\";function r(e){return e.slice()}function i(e,t){var n=r(e);return n.splice(t,1),n}t.__esModule=!0,t.combine=function(e,t){return e.concat(t)},t.copy=r,t.insertAt=function(e,t){var n=e.slice(0,t),r=e.slice(t,e.length),i=Array.prototype.slice.call(arguments),a=i.slice(2,i.length);return n.concat(a).concat(r)},t.removeAt=i,t.remove=function(e,t){var n=e.slice();for(;n.indexOf(t)>=0;)n=i(n,n.indexOf(t));return n},t.shuffle=function(e){return e.sort(function(){return Math.random()<.5?1:-1})},t.contains=function(e,t){return e.indexOf(t)>=0}},function(e,t,n){\"use strict\";function r(e,t){switch(typeof e){case\"object\":e=e||{r:0,g:0,b:0,a:1};break;default:if(e.indexOf(\"rgb\")>=0)e=e.substring(e.indexOf(\"(\")+1,e.lastIndexOf(\")\")).split(/,\\s*/),e={r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2]),a:Number(e[3])};else{if(!(e.indexOf(\"#\")>=0))return console.log(\"\"),console.log(\"ERROR: ColorUtils.toRgba does not accept color names such as '\"+e+\"'. Use HEX or an RGB/A string or object per documentation\"),console.log(\"Returning the color '\"+e+\"' without any alpha\"),console.log(\"\"),e;var n=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i.exec(e);e=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),a:n[4]?Number(n[4],16):1}:null}}return e.a||(e.a=1),t>=0&&(e.a=t),e}function i(e,t){return\"rgba(\"+(e=r(e,t)).r+\",\"+e.g+\",\"+e.b+\",\"+e.a+\")\"}function a(e){return e.from=e.from||e.color,e.from&&\"object\"!=typeof e.from&&(e.from=r(e.from)),e.to&&\"object\"!=typeof e.to&&(e.to=r(e.to)),e.amount=void 0===e.amount?1:e.amount,e}function o(e,t){return(e=Math.floor(255*(e+t)))<0&&(e=0),e}t.__esModule=!0,t.toRgba=r,t.toRgbaString=i,t.hue=function(e){var t=function(e){var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),a=Math.min(t,n,r),o=i-a,s=(i+a)/2,l=0,c=0;l=0==o?0:i==t?(n-r)/o%6*60:i==n?60*((r-t)/o+2):60*((t-n)/o+4);return c=o?o/(1-Math.abs(2*s-1)):0,{h:l,s:c,l:s}}((e=a(e)).from);t.h=(t.h+e.amount)%360,t.h<0&&(t.h+=360);var n=function(e){var t,n,r,i=e.h/60,a=e.s,s=e.l,l=(1-Math.abs(2*s-1))*a,c=l*(1-Math.abs(i%2-1)),u=s-l/2;switch(i=Math.floor(i)){case 0:t=l,n=c,r=0;break;case 1:t=c,n=l,r=0;break;case 2:t=0,n=l,r=c;break;case 3:t=0,n=c,r=l;break;case 4:t=c,n=0,r=l;break;case 5:t=l,n=0,r=c}return{r:o(t,u),g:o(n,u),b:o(r,u)}}(t);e.from.a>=0&&(n.a=e.from.a);return\"object\"===e.format?n:i(n)},t.saturation=function(e){delete e.to,e=a(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);if(\"a\"===n)t[n]=r;else{if(\"r\"===n){var o=0,s=255;for(var l in e.from)parseInt(e.from[l])>o&&(o=parseInt(e.from[l])),parseInt(e.from[l])<s&&(s=parseInt(e.from[l]))}t[n]=Math.round(r*e.amount+(1-e.amount)*((o+s)/2))}}return\"object\"===e.format?t:i(t)},t.contrast=function(e){delete e.to,e=a(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);t[n]=\"a\"===n?r:Math.round(r*e.amount)}return\"object\"===e.format?t:i(t)},t.tint=function(e){e=a(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);t[n]=\"a\"===n?r:Math.round(r+(parseInt(e.to[n])-r)*e.amount)}return\"object\"===e.format?t:i(t)},t.transform=function(e){e=a(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);t[n]=\"a\"===n?r:Math.round(r-(255-parseInt(e.to[n]))*e.amount)}return\"object\"===e.format?t:i(t)},t.invert=function(e){delete e.to,delete e.amount,e=a(e);var t={};for(var n in e.from){var r=parseInt(e.from[n]);t[n]=\"a\"===n?r:255-r}return\"object\"===e.format?t:i(t)}},function(e,t,n){\"use strict\";t.__esModule=!0,t.counterWithVars=function(e,t){t?Enabler.reportCustomVariableCount1(e):Enabler.reportCustomVariableCount2(e)},t.addVideoMetrics=function(e,t){Enabler.loadModule(studio.module.ModuleId.VIDEO,function(){studio.video.Reporter.attach(t||\"Video Report 1\",void 0!=e.screen?e.screen:e)})},t.addYouTubeVideoMetrics=function(e){var t=e.screen;t.addEventListener(\"play\",function(){e.isReplay?trackVideoReplay.call():trackVideoPlay.call()}),t.addEventListener(\"pause\",function(){e.complete||trackVideoPause.call()}),t.addEventListener(\"complete\",function(){trackVideoComplete.call()})}},function(e,t,n){\"use strict\";t.__esModule=!0,t.fitImageAtCoordinate=function(e,t,n){var r=new Image;void 0===t&&void 0===n?e.style.backgroundPosition=\"50% 50%\":r.onload=function(){var i={width:t||0,height:n||0},a={width:e.offsetWidth,height:e.offsetHeight},o=a.width/a.height,s=r.width/r.height;function l(t,n){var o=a[t]*(r[n]/r[t]),s=a[t]/r[t],l=a[n]/2-i[n]*s,c=a[n]-o;l>0?l=0:l<c&&(l=c),e.style.backgroundPosition=\"height\"===t?l+\"px 0px\":\"0px \"+l+\"px\"}o>s?l(\"width\",\"height\"):o<s&&l(\"height\",\"width\")};r.src=e.style.backgroundImage.replace(/url\\((['\"])?(.*?)\\1\\)/gi,\"$2\").split(\",\")[0],e.style.backgroundSize=\"cover\",e.style.backgroundRepeat=\"no-repeat\"}},function(e,t,n){\"use strict\";function r(e,t,n){var r=Math.min(t,n);return e<=Math.max(t,n)&&e>=r}t.__esModule=!0,t.toRadians=function(e){return Math.PI/180*e},t.toDegrees=function(e){return 180/Math.PI*e},t.random=function(e,t,n){t=t||0,n=void 0!=n&&n>0?n:1;var r=Math.min(e,t),i=Math.max(e,t);return r=Math.ceil(r/n)*n,i=Math.floor(i/n)*n,r+Math.floor(Math.random()*((i-r+n)/n))/(1/n)},t.randomBoolean=function(e){return e=e||.5,Math.random()<e},t.randomWeightedKey=function(e){var t=[],n=[0];for(var i in e)t.push(i),n.push(e[i]+(n[n.length-1]||0));for(var a=100*Math.random().toFixed(2),o=0;o<n.length-1;o++){var s=r(a,n[o],n[o+1]);if(s)return t[o]}},t.rel=function(e,t,n,r,i){return(i-n)/(r-n)*(t-e)+e},t.inRange=r,t.isNumber=function(e){return!isNaN(e)},t.toNumber=function(e){return+e},t.restrict=function(e,t,n){return Math.max(t,Math.min(n,e))},t.getAnglePoint=function(e,t,n,r){var e=e+Math.cos(r)*n,t=t+Math.sin(r)*n;return[e,t]},t.getAngle=function(e,t,n,r){return n=n||0,r=r||0,Math.atan2(r-t,n-e)},t.getDistance=function(e,t,n,r){return n=n||0,r=r||0,Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))}},function(e,t,n){\"use strict\";var r;t.__esModule=!0,t.setData=function(e){var t=e.getMonetData();return t.then(function(e){r=e}),t},t.getDataByKey=function(e){var t,n;for(var a in i)if(r.rootAssets[a+\".\"+e]){n=a,t=r.rootAssets[a+\".\"+e];break}return t[i[n]]};var i={text:\"text\",number:\"value\",image:\"url\",video:\"url\",url:\"url\",bool:\"value\"}},function(e,t,n){\"use strict\";t.__esModule=!0,t.clone=i,t.defaults=function e(t,n,r){void 0===t&&(t={});var a=i(t);for(var o in n){var s=n[o];void 0===a[o]?a[o]=n[o]:r&&\"[object Object]\"===Object.prototype.toString.call(s)&&(a[o]=e(a[o],s,r))}return a},t.objectifier=void 0;var r={};function i(e){if(\"[object Object]\"!==Object.prototype.toString.call(e))return e;var t=e.constructor();for(var n in e)t[n]=i(e[n]);return t}t.objectifier=r,r.get=function(e,t){void 0===t&&(t=window);var n=r._getSplits(e).splits;return r._getProperty(n,t)},r.set=function(e,t,n){void 0===n&&(n=window);var i=r._getSplits(e,!0);r._getProperty(i.splits,n)[i.lastKey]=t},r._getSplits=function(e,t){var n=e.split(\".\");return{splits:n,lastKey:t?n.pop():null}},r._getProperty=function(e,t){void 0===t&&(t={});for(var n,r=t,i=0;r&&(n=e[i]);i++)r=n in r?r[n]:void 0;return r}},function(e,t,n){\"use strict\";(function(e){t.__esModule=!0,t.addSpaces=function(e){for(var t=\"\",n=0;n<e;n++)t+=\"&nbsp;\";return t},t.getSpecialCharacter=function(t,r){t=e.proxyStringToLowerCase.apply(t);for(var i=0;i<n.length;i++){var a=e.proxyStringToLowerCase.apply(n[i].label);if(a===t)return r?n[i].upperCase:n[i].lowerCase}return!1},t.trimStartAndEnd=function(e){return e?e.replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\"):\"\"},t.removeSpaces=function(e){return e.split(\" \").join(\"\")},t.pad=function(e,t){var n=\"\";e<0&&(n=\"-\");e=e.toString().replace(/\\-/,\"\",e);for(;e.length<t;)e=\"0\"+e;return n+e};var n=[{label:\"iexcl\",upperCase:\"&#161;\",lowerCase:\"&#161;\"},{label:\"trademark\",upperCase:\"&#153;\",lowerCase:\"&#153;\"},{label:\"copyright\",upperCase:\"&#169;\",lowerCase:\"&#169;\"},{label:\"registered\",upperCase:\"&#174;\",lowerCase:\"&#174;\"},{label:\"nTilde\",upperCase:\"&#209;\",lowerCase:\"&#241;\"},{label:\"aAccent\",upperCase:\"&#193;\",lowerCase:\"&#225;\"},{label:\"eAccent\",upperCase:\"&#201;\",lowerCase:\"&#233;\"},{label:\"iAccent\",upperCase:\"&#205;\",lowerCase:\"&#237;\"},{label:\"oAccent\",upperCase:\"&#211;\",lowerCase:\"&#243;\"},{label:\"uAccent\",upperCase:\"&#218;\",lowerCase:\"&#250;\"}]}).call(this,n(11))},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(20));var i=function(){};Object.defineProperty(i,\"rx\",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty(i,\"ry\",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty(i,\"MAX_VERTICES\",{configurable:!0,enumerable:!0,writable:!0,value:256}),Object.defineProperty(i,\"MAX_VERTICES_MASK\",{configurable:!0,enumerable:!0,writable:!0,value:255}),Object.defineProperty(i,\"get\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){return new r.default(i._getVal(\"x\",e),i._getVal(\"y\",t))}}),Object.defineProperty(i,\"_init\",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var e=0;e<i.MAX_VERTICES;++e)e===i.MAX_VERTICES-1&&(i.rx.push(i.rx[0]),i.ry.push(i.ry[0])),i.rx.push(Math.random()-.5),i.ry.push(Math.random()-.5)}}),Object.defineProperty(i,\"_lerp\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t,n){return e*(1-n)+t*n}}),Object.defineProperty(i,\"_getVal\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){0==i.rx.length&&i._init();var n=\"x\"===e?i.rx:i.ry,r=(t%=i.MAX_VERTICES)-~~t,a=r*r*(3-2*r),o=~~t&i.MAX_VERTICES_MASK,s=o+1&i.MAX_VERTICES_MASK;return i._lerp(n[o],n[s],a)}});var a=i;t.default=a},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r={init:function(e){Enabler.addEventListener(studio.events.StudioEvent.EXPAND_START,e.expandStart),Enabler.addEventListener(studio.events.StudioEvent.EXPAND_FINISH,e.expandComplete),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START,e.collapseStart),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_FINISH,e.collapseComplete),adParams.expandable.expanded&&Enabler.setStartExpanded(!0)},collapse:function(e){console.log(\"DCS > collapse()\"),Enabler.requestCollapse(),e&&Enabler.reportManualClose()},expand:function(e){console.log(\"DCS > expand()\"),Enabler.requestExpand()},collapseComplete:function(){console.log(\"DCS > collapseComplete()\"),Enabler.finishCollapse()},expandComplete:function(){console.log(\"DCS > expandComplete()\"),Enabler.finishExpand()}};t.default=r},function(e,t,n){\"use strict\";(function(e){t.__esModule=!0,t.init=function(e){return console.log(\"Core.init()\"),new Promise(function(t,n){r.Device.init(),i.default.init(),a.addFbaImages(e),Promise.all([]).then(function(){t()}).catch(function(e){n(e)})})},t.loadDynamic=function(){return console.log(\"Core.loadDynamic()\"),new Promise(function(t,n){console.log(\"\\t Core load Image Queue\"),a.load(t,e.failAd)})};var r=n(10),i=function(e){return e&&e.__esModule?e:{default:e}}(n(18)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(21))}).call(this,n(11))},function(e,t,n){\"use strict\";t.__esModule=!0,t.LoaderUtils=t.default=void 0;var r=n(2),i=n(3),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(4));t.LoaderUtils=a;var o=u(n(54));t.ImageLoader=o.default;var s=u(n(55));t.InlineLoader=s.default;var l=u(n(56));t.DataLoader=l.default;var c=u(n(57));function u(e){return e&&e.__esModule?e:{default:e}}t.FontLoader=c.default;var d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},o=function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(t);return o._queue={},o._total=0,o._active=!1,o._startedCount=0,o.prepend=a.prepend||\"\",o.platformGetUrl=a.platformGetUrl,o.fileType=a.fileType||null,o.content=[],o.crossOrigin=a.crossOrigin||void 0,o.add(arguments[0]),t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.add=function(e){var n=this;if(\"string\"==typeof e)n._addSingleLoad(e);else if(e instanceof Array)for(var r=0;r<e.length;r++)n._addSingleLoad(e[r]);else e instanceof t&&(e.content&&e.content[0]&&\"fba\"==e.content[0].fileType?n._addFbaSubLoads(e.content[0]):n._addSubLoad(e))},n.load=function(){var e=this;if(e._active=!0,e._total<=0)console.log('Loader \"'+e.name+'\" has NO assets to be loaded.');else{var n=!1,r=\"\";for(var i in e._queue)if(!(e._queue[i]instanceof t)){n||(n=!0,r+='Loader \"'+e.name+'\" requesting:');var a=e._queue[i].fileName,o=e._queue[i].fileType,s=a.indexOf(\".\"+o)>-1?a:a+\".\"+o;r+=\"\\n\\t -> \"+(e._queue[i].prepend||\"\")+s}n&&console.log(r)}e._startSingleLoad(0)},n.getAllContent=function(){var e=[];return function n(r){for(var i=0;i<r.length;i++)r[i]instanceof t?n(r[i].content):e.push(r[i])}(this.content),e.length<1&&console.log(\"No Content found\"),e},n.getAllContentRaw=function(){for(var e=this.getAllContent(),t=0;t<e.length;t++)e[t]=e[t].dataRaw;return e},n.getLoader=function(e){var n=null;return function r(i){for(var a=0;a<i.length;a++)i[a]instanceof t&&(!i[a]||i[a].name!==e&&i[a]!==e?r(i[a].content):n=i[a])}(this.content),n||console.log(\"No Loader found of that name\"),n},n._addSingleLoad=function(e,t){var n,r=this,i=t?t[1]:r.fileType||a.getFileType(e);switch(i){case\"jpg\":case\"jpeg\":case\"gif\":case\"png\":case\"svg\":n=o.default;break;case\"ttf\":case\"woff\":n=c.default;break;case\"json\":case\"fba\":case\"bin\":case\"binary\":case\"svg+xml\":n=l.default;break;default:n=s.default}var u=new n(t?e:r.prepend+e,{scope:r,platformGetUrl:r.platformGetUrl,onComplete:r._handleSingleLoadComplete,onFail:r._handleFail,fileType:i,cacheBuster:r.cacheBuster,crossOrigin:r.crossOrigin});t&&(u.fileName=t[0]),u.queueIndex=r._total,r._queue[r._total]=u,r._total++},n._addSubLoad=function(e){var t=this;e.onComplete=t._handleSingleLoadComplete.bind(t),e.onProgress=t._handleProgress.bind(t),e.onFail=t._handleFail,e.queueIndex=t._total,t._queue[t._total]=e,t._total++},n._addFbaSubLoads=function(e){var t=new Uint8Array(4),n=new Uint32Array(t.buffer),r=44,i=new Uint8Array(e.dataRaw,r,1)[0];r+=5;for(var a=0;a<i;a++){for(var o=new Uint8Array(e.dataRaw,r,4),s=4,l=0;l<4;l++)t[--s]=o[l];var c=n[0];r+=7;var u=String.fromCharCode(new Uint8Array(e.dataRaw,r++,1)),d=new Uint8Array(e.dataRaw,r+3,1)[0]||0,f=new Uint8Array(e.dataRaw,r+4,d),p=String.fromCharCode.apply(String,f);d+=4;var h=new Uint8Array(e.dataRaw,r+d,c-d);r+=c+4;var m=p.split(\".\"),g=\"f\"==u?\"application/x-font-ttf\":\"image/\"+(\"svg\"==m[1]?\"svg+xml\":m[1]),_=new Blob([h],{type:g}),v=URL.createObjectURL(_);this._addSingleLoad(v,m)}},n._startSingleLoad=function(e){var n=this,r=n._queue[e];0==n._total?n._handleComplete():e<n._total&&(r instanceof t||e<n._total-1&&n._startLoadTimeOut(++e),r.load())},n._startLoadTimeOut=function(e){var t=this;setTimeout(function(){t._startSingleLoad(e)},10)},n._handleSingleLoadComplete=function(e){var t=this;t.content[e.queueIndex]=e,delete t._queue[e.queueIndex],t._handleProgress(),void 0==e.url&&e.queueIndex<t._total-1&&t._startLoadTimeOut(e.queueIndex+1)},n._handleProgress=function(){for(var e=this,t=e.content.length,n=0,r=0;r<t;r++)e.content[r]&&n++;var i=n,a=0;n<e._total&&e._queue[n]&&(a=e._queue[n].progress/e._total||0),e.progress=i/e._total+a,e.rawProgress=n/e._total+a,e.onProgress.call(e.scope,e),n>=e._total&&e._handleComplete()},n._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}((0,r.mix)(function(){}).with(i.LoaderBase));t.default=d},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(2),i=n(3),a=n(5),o=n(23);var s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};return t.renderOnly=!!a.renderOnly,t.crossOrigin=a.crossOrigin,t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.load=function(){var e=this;if(e.renderOnly)e._setTicker({content:e.url,width:0});else{var t=new Image;t.id=e.fileName,t.crossOrigin=e.crossOrigin,t.onload=e._handleComplete.bind(e),t.onerror=e._handleFail,t.src=e.url}},n._handleComplete=function(e){var t=this;t.dataRaw=e.target,t.onComplete.call(t.scope,t)},t}((0,r.mix)(function(){}).with(i.LoaderBase,a.LoaderSource,o.LoaderTicker));t.default=s},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(2),i=n(3),a=n(5);var o=function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.load=function(){var e,t=this;(e=\"css\"==t.fileType?t._createCssLink():\"html\"==t.fileType?t._createHtmlLink():t._createScript()).charset=\"utf-8\",e.onload=t._handleComplete.bind(t),e.onerror=t._handleFail,\"css\"==t.fileType||\"html\"==t.fileType?e.href=this.url:e.src=t.url,document.getElementsByTagName(\"head\")[0].appendChild(e)},n._createCssLink=function(){var e=document.createElement(\"link\");return e.rel=\"stylesheet\",e.type=\"text/css\",e},n._createHtmlLink=function(){var e=document.createElement(\"link\");return e.rel=\"import\",e},n._createScript=function(){var e=document.createElement(\"script\");return e.type=\"text/javascript\",e},n._handleComplete=function(e){var t=this;t.dataRaw=e.target,t.onComplete.call(t.scope,t)},t}((0,r.mix)(function(){}).with(i.LoaderBase,a.LoaderSource));t.default=o},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(2),i=n(3),a=n(5),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(4));var s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t=e.call.apply(e,[this].concat(r))||this;var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{},o=function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(t);return o.method=(a.method||\"get\").toLowerCase(),o.query=a.query||null,o.responseType=a.responseType||null,t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.load=function(){var e=this,t=null,n=\"post\"===e.method;e.req=o.createXMLHttpRequest(),void 0!=e.responseType&&(e.req.responseType=e.responseType);var r=e.url;switch(e.query&&(t=o.getParamsFromData(e.query),encodeURIComponent(t),n||(r+=\"?\"+t,t=null)),e.cacheBuster&&(r+=e.query&&!n?\"&\":\"?\",r+=\"cb=\"+(new Date).getTime()),e.req.onreadystatechange=e._handleStateChange.bind(e),e.req.open(e.method,r,!0),e.fileType){case\"xml\":e.req.overrideMimeType&&e.req.overrideMimeType(\"text/xml\");break;case\"json\":e.req.overrideMimeType&&e.req.overrideMimeType(\"application/json\");break;case\"fba\":case\"bin\":case\"binary\":e.responseType=e.req.responseType=\"arraybuffer\"}\"post\"===e.method&&e.req.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\"),e.req.send(t)},n._handleStateChange=function(e){var t=this;switch(t.req.readyState){case 3:200==this.req.status&&(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleProgress(t));break;case 4:200==t.req.status?(t.dataRaw=t.responseType?t.req.response:t.req.responseText,t._handleComplete(t)):t._handleFail({target:e})}},n._handleProgress=function(){var e=this;e.onProgress.call(e.scope,e)},n._handleComplete=function(){var e=this;e.onComplete.call(e.scope,e)},t}((0,r.mix)(function(){}).with(i.LoaderBase,a.LoaderSource));t.default=s},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(2),i=n(3),a=n(5),o=n(23);var s=function(e){function t(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.call.apply(e,[this].concat(n))||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.load=function(){var e=this;e.fileName=e.fileName.split(\".\")[0];var t=\"@font-face { font-family: \"+e.fileName+\"; src: url(\"+e.url+\") format('truetype'); }\",n=document.getElementById(\"RED_fontStyleSheet\");if(n)n.innerHTML+=t;else{var r=document.createElement(\"style\");r.type=\"text/css\",r.media=\"screen\",r.id=\"RED_fontStyleSheet\",r.appendChild(document.createTextNode(t)),document.getElementsByTagName(\"head\")[0].appendChild(r)}e._setTicker({content:\" !\\\"\\\\#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~\",css:\"position:absolute; top:-1000px; font-size:100px; font-family:san-serif; font-variant:normal; font-style:normal; font-weight:normal; letter-spacing:0; white-space:nowrap;\",font:e.fileName})},n._handleTickerComplete=function(e){var t=this;setTimeout(function(){t._removeTickerNode(e)},300),t._handleComplete()},n._handleComplete=function(e){var t=this;t.dataRaw=t.fileName,t.onComplete.call(t.scope,t)},t}((0,r.mix)(function(){}).with(i.LoaderBase,a.LoaderSource,o.LoaderTicker));t.default=s},function(e,t,n){\"use strict\";t.__esModule=!0,t.init=function(e){(r=e||{}).expandTime=r.expandTime||.5,r.collapseTime=r.collapseTime||.5,r.extend&&(s=r.extend).init(l);adParams.expandable.expanded?(a=!1,c()):u(!0)},t.collapse=function(e){i.GestureEvent.stop(e),s.collapse(e)},t.expand=c,t.hasUserInteracted=function(){return o};var r,i=n(24),a=!0,o=!1,s={init:function(){},collapse:function(e){l.collapseStart()},expand:function(e){l.expandStart()},collapseComplete:function(){l.collapseComplete()},expandComplete:function(){l.expandComplete()}},l={expandStart:function(e){d(\"expandStart\"),function(){var e=adParams.expandable;TweenLite.to(r.target,r.expandTime,{x:e.expandedX,y:e.expandedY,width:adParams.adWidth,height:adParams.adHeight,onComplete:s.expandComplete})}()},expandComplete:function(e){d(\"expandComplete\"),o=a,a=!0},collapseStart:function(e){u(),d(\"collapseStart\"),o=!0},collapseComplete:function(e){d(\"collapseComplete\"),o=!0}};function c(e){i.GestureEvent.stop(e),console.log(\"extend:\",s),s.expand(e)}function u(e){var t=e?0:r.collapseTime,n=adParams.expandable;TweenLite.to(r.target,t,{x:n.collapsedX,y:n.collapsedY,width:n.collapsedWidth,height:n.collapsedHeight,onComplete:e?void 0:s.collapseComplete})}function d(e){(r[e]||function(){}).call()}},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(25)),i=n(12);var a=new function(){var e=this,t=[],n=[],a=void 0!=document.createEventObject;function o(e){for(var n=null,i=0;i<t.length;i++)if(t[i].elem===e){n=t[i];break}return n||(n=function(e){var n=new r.default(e);return t.push(n),n}(e)),n}function s(t,n){var r=o(t);if(r.hasActiveChildren!=n){r.hasActiveChildren=n;for(var i=r.elem.getElementsByTagName(\"*\"),a=0;a<i.length;a++)i[a].parentNode==t&&(n?e.enable(i[a]):e.disable(i[a]))}}function l(e){for(var t=[],r=function e(t,r,i,a){t.style.visibility=\"hidden\",a.push(t);for(var o=document.elementFromPoint(r,i),s=0;s<n.length;s++)if(n[s].elem==o)return e(o,r,i,a);return o}(e.target,e.clientX,e.clientY,t),i=0;i<t.length;i++)t[i].style.visibility=\"visible\";return t=[],e.stopImmediatePropagation(),r}function c(e){var t=l(e),n=document.createEvent(\"HTMLEvents\");n.initEvent(e.type,!0,!1),t.dispatchEvent(n)}e._kills={},e.add=e.addEventListener=function(e,t,n){o(e).register(t,n),i.Styles.setCss(e,\"cursor\",\"pointer\"),i.Styles.setCss(e,\"pointer-events\",\"auto\")},e.remove=e.removeEventListener=function(e,t,n){var r=o(e);r&&(r.unregister(t,n),r.eventList.length<=0&&i.Styles.setCss(e,\"cursor\",\"auto\"))},e.disable=function(e){var t=o(e);n.push(t),a?(t.register(GestureEvent.CLICK,c),i.Styles.setCss(e,\"cursor\",\"auto\")):i.Styles.setCss(e,\"pointer-events\",\"none\")},e.disableChildren=function(e){s(e,!1)},e.enable=function(e){for(var t=o(e),r=0;r<n.length;r++)if(t==n[r]){a?t.unregister(GestureEvent.CLICK,c):(i.Styles.setCss(e,\"pointer-events\",\"auto\"),i.Styles.setCss(e,\"cursor\",\"pointer\"));break}},e.enableChildren=function(e){s(e,!0)}};t.default=a},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=new function(){var e=this;e.isFullScreen=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},e.enter=function(t){e.isFullScreen()||(t.requestFullscreen?(console.log(\" -> requestFullscreen\"),t.requestFullscreen()):t.msRequestFullscreen?(console.log(\" -> msRequestFullscreen\"),t.msRequestFullscreen()):t.mozRequestFullScreen?(console.log(\" -> mozRequestFullScreen\"),t.mozRequestFullScreen()):t.webkitRequestFullscreen&&(console.log(\" -> webkitRequestFullscreen\"),t.webkitRequestFullscreen()))},e.exit=function(){e.isFullScreen()&&(document.exitFullscreen?(console.log(\" -> exitFullscreen\"),document.exitFullscreen()):document.msExitFullscreen?(console.log(\" -> msExitFullscreen\"),document.msExitFullscreen()):document.mozCancelFullScreen?(console.log(\" -> mozCancelFullScreen\"),document.mozCancelFullScreen()):document.webkitExitFullscreen&&(console.log(\" -> webkitExitFullscreen\"),document.webkitExitFullscreen()))}};t.default=r},function(e,t,n){\"use strict\";t.__esModule=!0,t.resize=function(e,t,n,o){if(e=e||r,o||(o={width:0,height:0}),e==r)o.width=t.width,o.height=t.height;else if(e==a)o.width=n.width,o.height=n.height;else{var s=t.width/t.height,l=n.width/n.height,c=e==i?s:l,u=e==i?l:s;c<u?(o.height=t.height/(t.width/n.width),o.width=n.width):(o.width=t.width/(t.height/n.height),o.height=n.height)}return o},t.STRETCH=t.FIT=t.FILL=t.EXACT=void 0;var r=\"auto\";t.EXACT=r;var i=\"cover\";t.FILL=i;t.FIT=\"contain\";var a=\"100% 100%\";t.STRETCH=a},function(e,t,n){\"use strict\";t.__esModule=!0,t.blur=function(e){e.amount>=0&&i.setCss(e.target,{filter:\"blur(\"+e.amount+\"px)\"})},t.dropShadow=a,t.textDropShadow=function(e){i.setCss(e.target,{textShadow:o(e.angle||0,e.distance||0,e.size||0,null,e.color||\"#000000\",e.alpha)})},t.glow=function(e){e.angle=0,e.distance=0,a(e)},t.linearGradient=function(e){i.setCss(e.target,{background:\"linear-gradient(\"+(e.angle||0)+\"deg, \"+e.colors.toString()+\")\"})},t.radialGradient=function(e){i.setCss(e.target,{background:\"radial-gradient(\"+e.colors.toString()+\")\"})};var r=n(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(6));function a(e){i.setCss(e.target,{boxShadow:o(e.angle||0,e.distance||0,e.size||0,e.spread||0,e.color||\"#000000\",e.alpha,e.inner)})}function o(e,t,n,i,a,o,s){var l=\"\",c=-1*e+180,u=r.MathUtils.toRadians(c);return l+=(Math.cos(u)*t).toFixed(8)+\"px \",l+=(Math.sin(u)*t).toFixed(8)+\"px \",l+=n+\"px\",i&&(l+=\" \"+i+\"px\"),l+=\" \"+r.ColorUtils.toRgbaString(a,o),(s=!!s)&&(l+=\" inset\"),l}},function(e,t,n){\"use strict\";t.__esModule=!0,t.set=function(e,t,n,a){var s=i.get(e);a=!1!==a;var l=s.childNodes,c=[],u={};/(x)/gi.exec(t)&&(u.x={});/(y)/gi.exec(t)&&(u.y={});for(var d=0;d<l.length;d++){var f=l[d];for(var p in c[d]={},u){var h=r.getCss(f,p),m=f[o[p][0]],g=h+m,_=u[p];0==d&&(_.min=h,_.max=g),h<_.min&&(_.min=h),_.max<g&&(_.max=g),c[d][p]=h}}var v={top:0,bottom:0,left:0,right:0};if(n)for(var b in v)v[b]=isNaN(n)?n[b]||0:n;var y={};for(var p in u){var w=u[p];a&&(y[p]=w.min+r.getCss(s,p)-v[o[p][2]]),y[o[p][1]]=w.max-w.min+v[o[p][2]]+v[o[p][3]]}for(r.setCss(s,y),d=0;d<l.length;d++){var f=l[d],y={};for(var p in u)y[p]=c[d][p]-u[p].min+v[o[p][2]];r.setCss(f,y)}},t.XY=t.Y=t.X=void 0;var r=a(n(6)),i=a(n(7));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var o={x:[\"offsetWidth\",\"width\",\"left\",\"right\"],y:[\"offsetHeight\",\"height\",\"top\",\"bottom\"]};t.X=\"clampX\";t.Y=\"clampY\";t.XY=\"clampXY\"},function(e,t,n){\"use strict\";t.__esModule=!0,t.get=l,t.set=function(e,t){for(var n,a=Array.isArray(e)?e:[e],o=a,s=Array.isArray(o),c=0,o=s?o:o[Symbol.iterator]();;){var d;if(s){if(c>=o.length)break;d=o[c++]}else{if((c=o.next()).done)break;d=c.value}var f=d,p=l(f,t);if(u(f)){var h=f.canvas||r.get(f);i.setCss(h,p)}else for(var m in p)f[m]=p[m];void 0==n&&(n=p)}if(1==a.length)return n},t.calculate=c,t.TOP_RIGHT=t.TOP_LEFT=t.BOTTOM_RIGHT=t.BOTTOM_LEFT=t.TOP=t.RIGHT=t.LEFT=t.CENTER=t.BOTTOM=void 0;var r=a(n(7)),i=a(n(6));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}var o=[{x:\"offsetWidth\",y:\"offsetHeight\",parent:\"parentNode\"},{x:\"width\",y:\"height\",parent:\"stage\"}];t.BOTTOM=\"alignBottom\";var s=\"alignCenter\";t.CENTER=s;t.LEFT=\"alignLeft\";t.RIGHT=\"alignRight\";t.TOP=\"alignTop\";t.BOTTOM_LEFT=\"alignBottomLeft\";t.BOTTOM_RIGHT=\"alignBottomRight\";t.TOP_LEFT=\"alignTopLeft\";function l(e,t){var n=e.canvas||r.get(e),a={},l=!1!==t.snap,d=u(e)?0:1;\"string\"==typeof t&&(t=c(t));var f=t.against;if(t.type){var p=c(t.type);for(var h in p)t.hasOwnProperty(h)||(t[h]=p[h])}for(var m in t)if(\"x\"==m||\"y\"==m){var g=t[m];if(!g)continue;\"string\"==typeof g&&(g={type:g});var _=void 0,v=void 0,b=0,y=!1,w=g.offset||t.offset||0;if(g.outer=g.outer||t.outer,void 0!==g.against||void 0!==f){var x=0;u(_=g.against||f)?_.canvas?x=1:b=i.getCss(_,m):\"number\"==typeof _?(y=!0,b=_):(b=_[m],x=1),v=o[x][m],g.type===s&&(g.outer=!1)}else _=n[o[d].parent],v=o[d][m];var C=n[o[d][m]];switch(e._type){case\"arc\":case\"path\":g.type==s?C=0:w+=C/2;break;case\"text\":if(\"x\"===m)switch(e.alignText){case\"center\":C=0;case\"right\":C*=-1}}var E=c(g.type,C,y?0:_[v],!y&&!!g.outer);null!=E&&(E+=b+w,a[m]=l?Math.round(E):E)}return a}function c(e,t,n,r){var i=1==arguments.length;switch(e){case\"alignBottom\":if(r&&(t=0),!i)return n-t;case\"alignTop\":return i?{y:e}:r?-t:0;case\"alignRight\":if(r&&(n+=t),!i)return n-t;case\"alignLeft\":return i?{x:e}:r?-t:0;case\"alignCenter\":return r&&(n=0),i?{x:e,y:e}:(n-t)/2;default:return null}}function u(e){return e instanceof HTMLElement||void 0!=e.canvas}t.TOP_RIGHT=\"alignTopRight\"},function(e,t,n){\"use strict\";var r,i;t.__esModule=!0,t.default=void 0;var a={ENABLED:\"uiComponentEnabled\",RESIZE:\"uiResize\",SLIDER_UPDATE:\"uiSliderUpdate\",get componentEnabled(){return r||(r=new CustomEvent(\"uiComponentEnabled\")),r},get sliderUpdate(){return i||(i=new CustomEvent(\"uiSliderUpdate\")),i}};t.default=a},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(27));n(67);var i=function(){};Object.defineProperty(i,\"_isPaused\",{configurable:!0,enumerable:!0,writable:!0,value:!0}),Object.defineProperty(i,\"_isActive\",{configurable:!0,enumerable:!0,writable:!0,value:!0}),Object.defineProperty(i,\"_sets\",{configurable:!0,enumerable:!0,writable:!0,value:{}}),Object.defineProperty(i,\"_RAF\",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(i,\"register\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t,n){var a=i;n=n||30,a._sets[n]||(a._sets[n]=new r.default(n));for(var o=a._sets[n].pool,s=0;s<o.length;s++)if(o[s].from===e&&o[s].handler===t)return;o.push({handler:t,from:e}),console.log(\"pool is now:\",o),a._isActive&&a.resume()}}),Object.defineProperty(i,\"unregister\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t,n){var r=i;for(var a in r._sets)if(!n||a==n){for(var o=r._sets[a].pool,s=0;s<o.length;s++)if(o[s].from===e&&o[s].handler===t){o.splice(s,1);break}0==o.length&&delete r._sets[a]}0===Object.keys(r._sets).length&&(r.pause(),r._isActive=!0)}}),Object.defineProperty(i,\"pause\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=i;if(arguments.length>0){for(var t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];e._sets[n]&&(e._sets[n]._paused=!0,e._isPaused=!0)}for(var r in e._sets)if(!e._sets[r]._paused){e._isPaused=!1;break}}else{for(var r in e._sets)e._sets[r]._paused=!0;e._isPaused=!0}e._isPaused&&(e._isActive=!1,window.cancelAnimationFrame(e._RAF))}}),Object.defineProperty(i,\"resume\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=i,t=!e._isPaused;if(arguments.length>0)for(var n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];e._sets[r]&&(e._sets[r]._paused=!1,e._isPaused=!1)}else{for(var a in e._sets)e._sets[a]._paused=!1;e._isPaused=!1}t||(e._isActive=!0,e._RAF=window.requestAnimationFrame(e.tick))}}),Object.defineProperty(i,\"secondsAsFrames\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return 1/e}}),Object.defineProperty(i,\"tick\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=i;if(!e._isPaused){for(var t in e._sets)e._sets[t].tick();window.requestAnimationFrame(e.tick)}}});var a=i;t.default=a},function(e,t,n){\"use strict\";for(var r=/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent),i=[\"webkit\",\"moz\"],a=0;!window.requestAnimationFrame&&a<i.length;a++)window.requestAnimationFrame=window[i[a]+\"RequestAnimationFrame\"],window.cancelAnimationFrame=window[i[a]+\"CancelAnimationFrame\"]||window[i[a]+\"CancelRequestAnimationFrame\"];window.requestAnimationFrame&&window.cancelAnimationFrame&&!r||(console.log(\"PolyFill -> FrameRate\"),window.requestAnimationFrame=function(e){return setTimeout(e,17)},window.cancelAnimationFrame=clearTimeout)},function(e,t,n){\"use strict\";t.__esModule=!0,t.createGlobalNode=function(e,t){if(document.getElementById(e))return;var n=document.createElement(\"style\");n.type=\"text/css\",n.id=e;var r=2===arguments.length?t:\"\";if(arguments.length>2)for(var i=0;i<arguments.length-1;i+=2){var a=arguments[i+1].replace(/\\s*/g,\"\");r+=a,r+=\" { \"+(arguments[i+2]||\"\")+\" }\\n\"}n.innerHTML=r,document.getElementsByTagName(\"head\")[0].appendChild(n)},t.addClass=function(e,t){for(var n=r.Markup.getElement(e),i=0;i<arguments.length-1;i++)n.classList.add(arguments[i+1])},t.removeClass=function(e,t){r.Markup.getElement(e).classList.remove(t)};var r=n(12)},function(module,exports,__webpack_require__){\"use strict\";exports.__esModule=!0,exports.default=void 0;var _superagent=_interopRequireDefault(__webpack_require__(16)),_adParticles=__webpack_require__(70),_adGeom=__webpack_require__(1),_adUtils=__webpack_require__(0),_globalSetting=__webpack_require__(8),_index=_interopRequireDefault(__webpack_require__(72)),_Dom=_interopRequireDefault(__webpack_require__(29));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Interface=function(){function Interface(){var _this2=this;Object.defineProperty(this,\"buildInterface\",{configurable:!0,enumerable:!0,writable:!0,value:function(){_this2.createPS(),_this2.guiInterfaces=[],_this2.psControl=_this2.generateControl(_this2.data.emitterPhysics),_this2.genertateInterface(_this2.data.emitterPhysics,_this2.psControl),_this2.styleControl=_this2.generateControl(_this2.data.styleAnimation),_this2.genertateInterface(_this2.data.styleAnimation,_this2.styleControl),_this2.activeModels=[];var e=_this2.generateParticleModelData();_this2.modelControl=_this2.generateControl(e),_this2.modelGui=_this2.genertateInterface(e,_this2.modelControl),_this2.actionControl=_this2.generateControl(_this2.data.actions),_this2.genertateInterface(_this2.data.actions,_this2.actionControl),_this2.interfaceContainer=document.querySelectorAll(\".ac\")[0],_this2.blockGuide=document.querySelector(\"#block-guide\"),_this2.codeDisplay=document.querySelector(\"#code-display\"),_this2.codeDisplayText=document.querySelector(\"#code-display-text\"),_this2.codeClose=document.querySelector(\"#code-close\"),_this2.saveFile=document.querySelector(\"#save\"),_this2.velGuide=document.querySelector(\"#velocity-guide\"),_this2.velGuideCtx=_this2.velGuide.getContext(\"2d\"),_this2.forceGuide=document.querySelector(\"#force-guide\"),_this2.forceGuideCtx=_this2.forceGuide.getContext(\"2d\"),_Dom.default.setGroupStyle([_this2.velGuide,_this2.forceGuide],{left:_this2.adWidth/2-60+\"px\",top:_this2.adHeight/2-60+\"px\"}),_this2.saveFile.addEventListener(\"click\",_this2.writeCode,!1),_this2.codeClose.addEventListener(\"click\",function(){_this2.codeDisplay.classList.remove(\"show\",\"show-message\")},!1),_this2.createMoveBtn(),_this2.createHelpBtn()}}),Object.defineProperty(this,\"createMoveBtn\",{configurable:!0,enumerable:!0,writable:!0,value:function(){_this2.interfaceOffset=new _adGeom.Vector2D(0,0),_this2.moveBtn=document.createElement(\"div\"),_this2.moveBtn.id=\"move-btn\",_this2.interfaceContainer.appendChild(_this2.moveBtn),_this2.moveBtn.addEventListener(\"mousedown\",function(e){_this2.dragging=!0,_this2.draggingStart=new _adGeom.Vector2D(e.clientX,e.clientY)}),document.body.addEventListener(\"mousemove\",function(e){if(_this2.dragging){_this2.draggingOffset=new _adGeom.Vector2D(e.clientX,e.clientY).sub(_this2.draggingStart),_this2.interfaceOffset.add(_this2.draggingOffset);var t=_this2.interfaceOffset.y+\"px\",n=-1*_this2.interfaceOffset.x+\"px\";_this2.interfaceContainer.style.top=t,_this2.interfaceContainer.style.right=n,_this2.draggingStart=new _adGeom.Vector2D(e.clientX,e.clientY)}}),document.body.addEventListener(\"mouseup\",function(e){_this2.dragging=!1})}}),Object.defineProperty(this,\"createHelpBtn\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=document.createElement(\"a\");e.id=\"help-btn\",e.href=\"https://confluence.ff0000.com/display/AT/PARTICLES\",e.target=\"_blank\",_this2.interfaceContainer.appendChild(e)}}),Object.defineProperty(this,\"createPS\",{configurable:!0,enumerable:!0,writable:!0,value:function(){_this2.canvasEl=document.querySelector(\"#canvas-el\"),_this2.canvasEl.style.width=_this2.adWidth+\"px\",_this2.canvasEl.style.height=_this2.adHeight+\"px\",_this2.canvasEl.width=_this2.adWidth,_this2.canvasEl.height=_this2.adHeight;var e={emitterData:window.selectedEmitterData,fps:_this2.fps};_this2.PS=new _adParticles.Emitter,_this2.PS.init(_this2.canvasEl,e),_this2.PS.emit()}}),Object.defineProperty(this,\"getPSProp\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){if(\"action\"===t)return _this2.PS[e]||null;var n=_this2.PS.get(e);return void 0===n?null:n}}),Object.defineProperty(this,\"publishCode\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=_this2.PS.properties,t=\"export default \";t+=JSON.stringify(e,null,2),_this2.codeDisplayText.value=t,_this2.codeDisplay.classList.add(\"show\")}}),Object.defineProperty(this,\"writeCode\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=\"export default \"+JSON.stringify(_this2.PS.properties,null,2),t=(0,_globalSetting.get)(\"adWidth\")+\"x\"+(0,_globalSetting.get)(\"adHeight\");_superagent.default.post(\"/ad-es6-particles/api/\").send({action:\"writeData\",size:t,data:e,fileName:_this2.selectedEmitterDataName}).end(function(e,t){if(e)alert(\"Erro with API. Unable to save the fil\");else{var n=JSON.parse(t.text);document.querySelector(\"#saved-message\").innerHTML=n.stdout,_this2.codeDisplay.classList.add(\"show-message\")}})}}),Object.defineProperty(this,\"showDataSelector\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){void 0===e&&(e=[]);var t=document.querySelector(\"#data-options\");e.forEach(function(e,n){var r=document.createElement(\"li\");r.innerHTML=e.name,r.classList.add(\"btn\"),t.appendChild(r),r.addEventListener(\"click\",function(){_this2.selectData(n)})}),_this2.dataSelector.classList.add(\"show\")}}),Object.defineProperty(this,\"selectData\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=_this2.emitterDataFiles[e];_this2.selectedEmitterDataName=t.name,_this2.evalData(t.content),_this2.buildInterface(),_this2.dataSelector.classList.remove(\"show\")}}),Object.defineProperty(this,\"evalData\",{configurable:!0,enumerable:!0,writable:!0,value:function value(data){try{eval(\"window.selectedEmitterData=\"+data)}catch(e){alert(e+\"\\nPlease check your data file\")}}}),Object.defineProperty(this,\"addParticleModel\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=_this2,t=\"model\"+_this2.modelIndex,n={name:t,type:\"folder\",children:_this2.data.getDefaultNewParticleModelData(t)};_this2.activeModels.push(t),_this2.modelIndex++,n.children.forEach(function(t){\"object\"==typeof t.defaultVal&&(t.defaultVal=JSON.stringify(t.defaultVal,null,1)),e.modelControl[t.name]=t.defaultVal}),_this2.processData(_this2.modelControl,_this2.modelGui,n),_this2.updateEmitterModels()}}),Object.defineProperty(this,\"deleteParticleModel\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t,n=document.querySelector(\"#\"+e);for(n.parentNode.removeChild(n),t=0;t<_this2.activeModels.length;t++)if(_this2.activeModels[t]===e){_this2.activeModels.splice(t,1);break}_this2.updateEmitterModels()}}),Object.defineProperty(this,\"generateControl\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t,n={};for(t=0;t<e.length;t++){var r=e[t];if(\"folder\"===r.type){var i;for(i=0;i<r.children.length;i++){var a=r.children[i],o=_this2.syncWithCurrentData(a);n[a.name]=null===o?a.defaultVal:o,\"action\"===r.type&&(n[r.name]=n[r.name].bind(_this2.PS))}}else{o=_this2.syncWithCurrentData(r);n[r.name]=null===o?r.defaultVal:o,\"action\"===r.type&&(n[r.name]=n[r.name].bind(_this2.PS))}}return n}}),Object.defineProperty(this,\"generateParticleModelData\",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=_this2;_this2.modelIndex=0;var t,n=_this2.data.particleModel,r=_this2.getPSProp(\"particleModels\");for(t=0;t<r.length;t++){var i=\"model\"+_this2.modelIndex,a=r[t],o={name:i,type:\"folder\",children:_this2.data.getDefaultNewParticleModelData(i)};o.children.forEach(function(t){a[t.modelKey]&&(t.defaultVal=a[t.modelKey]),\"object\"==typeof t.defaultVal&&(t.defaultVal=JSON.stringify(t.defaultVal,null,1)),t.name.indexOf(\"Delete\")>-1&&(t.defaultVal=function(t){return function(){e.deleteParticleModel(t)}}(i))}),n.push(o),_this2.activeModels.push(i),_this2.modelIndex++}return n}}),Object.defineProperty(this,\"genertateInterface\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t){var n,r=new dat.GUI;for(n=0;n<e.length;n++){var i=e[n];this.processData(t,r,i)}return r}}),Object.defineProperty(this,\"processData\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t,n,r){var i;switch(void 0===r&&(r={}),n.type){case\"text\":case\"boolean\":case\"action\":\"text\"===n.type&&\"object\"==typeof n.defaultVal&&(n.defaultVal=JSON.stringify(n.defaultVal,null,1)),i=t.add(e,n.name),void 0!==n.min&&i.min(n.min),i.onFinishChange(function(e){window.Interface.setEmitterProperty(n,e,r),\"world\"===r.name&&_this2.hideGuide(!0)});break;case\"color\":(i=t.addColor(e,n.name)).onChange(function(e){window.Interface.setEmitterProperty(n,e,r)});break;case\"slider\":i=t.add(e,n.name,n.range[0],n.range[1]),void 0!==n.step&&i.step(n.step),i.onChange(function(e){window.Interface.setEmitterProperty(n,e,r)}),i.onFinishChange(function(e){switch(r.name){case\"world\":case\"origin\":_this2.hideGuide();break;case\"velocityAngle\":_this2.hideVelocityGuide();break;case\"globalForce\":_this2.hideForceGuide()}});break;case\"dropdown\":(i=t.add(e,n.name,n.options)).onFinishChange(function(e){window.Interface.setEmitterProperty(n,e,r),\"origin\"===r.name&&_this2.hideGuide(!0)});break;case\"folder\":var a,o=t.addFolder(n.name);for(a=0;a<n.children.length;a++)_this2.processData(e,o,n.children[a],n)}}}),Object.defineProperty(this,\"setEmitterProperty\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t,n){if(\"action\"!==e.type){n=n||{};var r,i=e.map||e.name,a=_this2.psControl;switch(n.name){case\"world\":(\"worldActive\"!==e.name||t)&&_this2.showGuide(a.left,a.top,a.right-a.left,a.bottom-a.top);break;case\"origin\":var o=a.originXRange/2,s=a.originYRange/2,l=a.originX-o,c=a.originY-s;_this2.showGuide(l,c,a.originX+o-l,a.originY+s-c,a.originShape);break;case\"velocityAngle\":var u=a.angleRange/2;_this2.showVelocityGuide(a.angleValue-u,a.angleValue+u);break;case\"globalForce\":_this2.showForceGuide(a.forceAngle)}if(\"string\"==typeof t)if(\"[\"===(r=t.replace(/\\s+/g,\"\"))[0]&&\"]\"===r[r.length-1]){var d,f=(r=(r=r.substr(1)).slice(0,r.length-1)).split(\",{\"),p=[];for(d=0;d<f.length;d++){var h=f[d];if(0!==d&&(h=\"{\"+h),0!==h.trim().length)try{p.push(JSON.parse(h))}catch(e){return void alert(\"This is not a valid input.\")}}t=p}0===(r=n.name||\"\").indexOf(\"model\")?_this2.updateEmitterModels():_this2.PS.set(i,t)}}}),Object.defineProperty(this,\"syncWithCurrentData\",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=e.map||e.name,n=null;switch(e.name){case\"bgImage\":n=_this2.getPSProp(\"background.image\")||_this2.images[0]||\"\",_this2.PS.set(\"background.image\",n);break;default:n=_this2.getPSProp(t,e.type)}if(\"object\"==typeof n&&null!==n){var r,i=\"[\\n\";for(r=0;r<n.length;r++)i+=\" \",i+=JSON.stringify(n[r]),r<n.length-1&&(i+=\", \",i+=\"\\n\");n=i+=\"\\n]\"}return void 0===n&&(n=null),n}}),Object.defineProperty(this,\"showGuide\",{configurable:!0,enumerable:!0,writable:!0,value:function(e,t,n,r,i){var a={left:e+\"px\",top:t+\"px\",width:n+\"px\",height:r+\"px\"};_Dom.default.setStyle(_this2.blockGuide,a),_Dom.default.addClass(_this2.blockGuide,\"show\"),\"oval\"===i&&_Dom.default.addClass(_this2.blockGuide,\"oval\")}}),this.adWidth=(0,_globalSetting.get)(\"adWidth\"),this.adHeight=(0,_globalSetting.get)(\"adHeight\"),this.fps=(0,_globalSetting.get)(\"fps\"),this.emitterDataFiles=(0,_globalSetting.get)(\"emitterDataFiles\"),this.images=(0,_globalSetting.get)(\"loadedImageNames\"),this.data=(0,_index.default)(this),this.emitterDataFiles.length>1?(this.dataSelector=document.querySelector(\"#data-selector\"),this.showDataSelector(this.emitterDataFiles)):(this.evalData(this.emitterDataFiles[0].content),this.selectedEmitterDataName=this.emitterDataFiles[0].name,this.buildInterface())}var _proto=Interface.prototype;return _proto.updateEmitterModels=function(){var e,t=[],n=this.modelControl;for(e=0;e<this.activeModels.length;e++){var r=this.activeModels[e],i={};i.type=n[r+\"Type\"],i.id=n[r+\"Id\"],i.width=n[r+\"Width\"],\"Image\"===i.type&&(i.image=n[r+\"ImageName\"]),\"Sprite\"===i.type&&(i.image=n[r+\"ImageName\"],i.spriteSetting=JSON.parse(n[r+\"SpriteSetting\"])),\"Rect\"===i.type&&(i.height=n[r+\"Height\"]),i.probability=n[r+\"Probability\"],i.properties=JSON.parse(n[r+\"Props\"]),t.push(i)}this.PS.set(\"particleModels\",t)},_proto.hideGuide=function(e){var t=this;setTimeout(function(){_Dom.default.removeClass(t.blockGuide,\"show\"),_Dom.default.removeClass(t.blockGuide,\"oval\")},e?500:0)},_proto.showVelocityGuide=function(e,t){_Dom.default.addClass(this.velGuide,\"show\");var n=this.velGuideCtx,r=new _adGeom.Vector2D(60,60);_adGeom.Vector2D.degreeToVector(e),_adGeom.Vector2D.degreeToVector(t);n.clearRect(0,0,120,120),n.beginPath(),n.moveTo(r.x,r.y),n.arc(r.x,r.y,60,0,2*Math.PI),n.lineTo(r.x,r.y),n.fillStyle=\"rgba( 255, 255, 255, .4 )\",n.fill(),n.closePath(),n.beginPath(),n.moveTo(r.x,r.y),n.arc(r.x,r.y,58,_adUtils.MathUtils.toRadians(e),_adUtils.MathUtils.toRadians(t)),n.lineTo(r.x,r.y),n.strokeStyle=\"rgba( 0, 0, 0, .5 )\",n.fillStyle=\"rgba( 0, 200, 255, .4 )\",n.lineWidth=2,n.fill(),n.stroke(),n.closePath()},_proto.showForceGuide=function(e){_Dom.default.addClass(this.forceGuide,\"show\");var t=this.forceGuideCtx,n=new _adGeom.Vector2D(60,60),r=_adGeom.Vector2D.degreeToVector(e);r.mult(60),r.add(n),t.clearRect(0,0,120,120),t.beginPath(),t.arc(n.x,n.y,60,0,2*Math.PI),t.strokeStyle=\"rgba( 0, 0, 0, 0)\",t.fillStyle=\"rgba( 255, 255, 255, 0.3 )\",t.fill(),t.stroke(),t.closePath(),t.beginPath(),t.arc(n.x,n.y,5,0,2*Math.PI),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.strokeStyle=\"rgba( 0, 0, 0, 1 )\",t.fillStyle=\"rgba( 255, 255, 255, .4 )\",t.lineWidth=2,t.fill(),t.stroke(),t.closePath()},_proto.hideVelocityGuide=function(){_Dom.default.removeClass(this.velGuide,\"show\")},_proto.hideForceGuide=function(){_Dom.default.removeClass(this.forceGuide,\"show\")},Interface}(),_default=Interface;exports.default=_default},function(e,t,n){\"use strict\";t.__esModule=!0,t.ParticlesUtils=t.ParticleModel=t.Particle=t.Graphic=t.Emitter=void 0;var r=l(n(71));t.Emitter=r.default;var i=l(n(15));t.Graphic=i.default;var a=l(n(28));t.Particle=a.default;var o=l(n(13));t.ParticleModel=o.default;var s=l(n(14));function l(e){return e&&e.__esModule?e:{default:e}}t.ParticlesUtils=s.default},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=n(1),i=n(24),a=n(0),o=n(9),s=u(n(28)),l=u(n(13)),c=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=this;e.G=new r.Vector2D(0,.1),e.customBehaiver={emitter:[],particle:[]},e.init=function(t,n){var r=(n=n||{}).emitterData;e.fps=n.fps||60,e.canvas=t,e.ctx=t.getContext(\"2d\"),e.ctxWidth=t.width,e.ctxHeight=t.height,e.active=!1,e.frameCount=0,e.startEmitFrame=0,e.frameEmittedCount=0,e.liveParticles=[],e.particles=[],e.models=[],e.properties={},e.setProperties(r),e._drawBackground(),i.FrameRate.register(e,e._run,e.fps)},e.set=function(t,n,r){r=void 0===r||r,a.ObjectUtils.objectifier.set(t,n,e.properties),r&&e._afterPropertyChanged([t.split(\".\")[0]])},e.get=function(t){return a.ObjectUtils.objectifier.get(t,e.properties)},e.setProperties=function(t){var n=[];for(var r in t)e.set(r,t[r],!1),n.push(r.split(\".\")[0]);e._afterPropertyChanged(n)},e.addCustomBehavier=function(e,t){this.customBehaiver[e].push(t)},this.removeCustomBehavier=function(e,t){var n,r=this.customBehaiver[e];for(n=0;n<r.length;n++)r[n]===t&&this.customBehaiver[e].splice(n,1)},e.emit=function(){e.active=!0,e.startEmitFrame=e.frameCount,0===e.properties.emitRate&&e.createParticles(e.properties.emitAmount)},e.stopEmitting=function(){e.active=!1},e.empty=function(){e.particles.forEach(function(e){}),e.particles=[]},e.pause=function(){i.FrameRate.unregister(e,e._run)},e.resume=function(){i.FrameRate.register(e,e._run,e.fps)},e.tween={},e.tween.to=function(t,n){var r=(n=n||{}).onUpdate||null,i=n.delay||0;return delete n.delay,TweenLite.delayedCall(i,function(){var i={};for(var a in n)void 0!==e.get(a)&&(i[a]=e.get(a));n.onUpdate=function(){r&&r(),e.setProperties(i)},TweenLite.to(i,t,n)})},e.createParticles=function(t){if(e.frameEmittedCount++,!(e.models.length<=0)){var n,r=e.properties,i=e.probabilityMap;for(n=0;n<t;n++){var o,l=e.models;if(e.particles.length>=r.maxParticleAmount)return;if(r.pickRandomModel){var c,u=a.MathUtils.random(0,e.totalProbability,.01);for(c=0;c<i.length-1;c++)if(a.MathUtils.inRange(u,i[c],i[c+1])){o=c;break}}else o=(e.frameEmittedCount-1)%l.length;e.particles.push(new s.default(e.ctx,l[o],e.fps))}}},e.addModel=function(t){e.properties.particleModels.push(t),e._afterPropertyChanged([\"particleModels\"])},e.removeModel=function(t){var n,r=null,i=e.properties.particleModels;for(n=0;n<i.length;n++)if(t===i[n].id){r=n;break}null!==r&&(i.splice(r,1),e._afterPropertyChanged([\"particleModels\"]))},e._drawBackground=function(){var t=e.properties,n=t.background;if(t.clearCanvas){switch(e.frameCount>0&&(e.ctx.globalAlpha=n.alpha),n.type){case\"color\":e.ctx.beginPath(),e.ctx.rect(0,0,e.ctxWidth,e.ctxHeight),e.ctx.fillStyle=n.color,e.ctx.fill(),e.ctx.closePath();break;case\"image\":e.ctx.drawImage(o.ImageManager.get(n.image),0,0,e.ctxWidth,e.ctxHeight);break;default:e.ctx.clearRect(0,0,e.ctxWidth,e.ctxHeight)}e.ctx.globalAlpha=1}},e._afterPropertyChanged=function(t){if(void 0===t&&(t=[]),t.indexOf(\"globalForce\")>-1){var n=e.properties.globalForce;e._globalForce=r.Vector2D.degreeToVector(n.angle).mult(n.amount)}if(t.indexOf(\"particleModels\")>-1){e.models=[],e.totalProbability=0;for(var i=[],a=e.properties.particleModels,s=0;s<a.length;s++){var u,d,f=a[s];switch(f.type){case\"Image\":u=new c.default[f.type](o.ImageManager.get(f.image),f.width,f.style);break;case\"Sprite\":u=new c.default[f.type](o.ImageManager.get(f.image),f.width,f.style,f.spriteSetting);break;case\"Circle\":u=new c.default[f.type](f.width,f.style);break;case\"Rect\":u=new c.default[f.type](f.width,f.height,f.style)}(d=new l.default(u,f.properties)).setDefaultProperties(e.properties),e.models.push(d),i.push(e.totalProbability);var p=void 0===f.probability?1:f.probability;e.totalProbability+=p}i.push(e.totalProbability),e.probabilityMap=i}else{var h=e.properties;e.models.forEach(function(e){e.setDefaultProperties(h)})}}.bind(e),e._run=function(){var t,n=e.properties;for(e._drawBackground(),t=0;t<e.particles.length;t++){var r=this.particles[t];if(r.isDead(e.ctxWidth,e.ctxHeight,n.killIfOutOfCanvas))r=null;else{if(e.liveParticles.push(r),r.update(),r.applyForce(e._globalForce),0!==n.gravityAmount){var i=e.G.clone();i.mult(n.gravityAmount),r.applyForce(i)}var a;if(n.world.active&&r.checkWorld(n.world.value),0!==e.customBehaiver.particle)for(a=0;a<e.customBehaiver.particle.length;a++)var o=e.customBehaiver.particle[a].call(o,r,e.particles);r.render()}}if(e.particles=e.liveParticles,e.liveParticles=[],0!==e.customBehaiver.emitter)for(a=0;a<e.customBehaiver.emitter.length;a++)o=e.customBehaiver.emitter[a].call(o,e);e.active&&(e.frameCount-e.startEmitFrame)%~~(1/n.emitRate)==0&&e.createParticles(n.emitAmount),e.frameCount++}};t.default=d},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=s(n(73)),i=s(n(74)),a=s(n(75)),o=n(76);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return{actions:(0,r.default)(e),emitterPhysics:i.default,styleAnimation:(0,a.default)(e),particleModel:(0,o.getParticleModelAction)(e),getDefaultNewParticleModelData:(0,o.getDefaultNewParticleModelData)(e)}};t.default=l},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;var r=function(e){return[{name:\"emit\",type:\"action\",defaultVal:function(){e.PS.emit()}},{name:\"stopEmitting\",type:\"action\",defaultVal:function(){e.PS.stopEmitting()}},{name:\"pause\",type:\"action\",defaultVal:function(){e.PS.pause()}},{name:\"resume\",type:\"action\",defaultVal:function(){e.PS.resume()}},{name:\"empty\",type:\"action\",defaultVal:function(){e.PS.empty()}},{name:\"publishCode\",type:\"action\",defaultVal:function(){e.publishCode()}}]};t.default=r},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;t.default=[{name:\"pickRandomModel\",type:\"boolean\",defaultVal:!0},{name:\"maxParticleAmount\",type:\"slider\",range:[0,1500],defaultVal:300,step:1},{name:\"emitRate\",type:\"slider\",range:[0,1],defaultVal:.1,step:.01},{name:\"emitAmount\",type:\"slider\",range:[0,50],defaultVal:1,step:1},{name:\"killIfOutOfCanvas\",type:\"boolean\",defaultVal:!1},{name:\"world\",type:\"folder\",children:[{name:\"worldActive\",type:\"boolean\",map:\"world.active\",defaultVal:!1,step:1},{name:\"left\",type:\"slider\",map:\"world.value.0\",defaultVal:0,range:[-200,1500],step:1},{name:\"right\",type:\"slider\",map:\"world.value.1\",defaultVal:300,range:[-200,1500],step:1},{name:\"top\",type:\"slider\",map:\"world.value.2\",defaultVal:0,range:[-200,1500],step:1},{name:\"bottom\",type:\"slider\",map:\"world.value.3\",defaultVal:300,range:[-500,1500],step:1}]},{name:\"gravityAmount\",type:\"slider\",range:[-5,5],defaultVal:.1,step:.01},{name:\"bounceAmount\",type:\"slider\",range:[0,.9],defaultVal:.1,step:.01},{name:\"globalForce\",type:\"folder\",map:\"globalForce\",children:[{name:\"forceAngle\",type:\"slider\",map:\"globalForce.angle\",defaultVal:0,range:[0,359],step:1},{name:\"forceAmount\",type:\"slider\",map:\"globalForce.amount\",defaultVal:.05,range:[0,.5],step:.01}]},{name:\"origin\",type:\"folder\",children:[{name:\"originShape\",type:\"dropdown\",map:\"origin.shape\",options:[\"rect\",\"oval\"]},{name:\"originX\",type:\"slider\",map:\"origin.value.x\",defaultVal:200,range:[-1e3,1e3]},{name:\"originY\",type:\"slider\",map:\"origin.value.y\",defaultVal:200,range:[-1e3,1e3]},{name:\"originXRange\",type:\"slider\",map:\"origin.range.x\",defaultVal:0,range:[0,1e3]},{name:\"originYRange\",type:\"slider\",map:\"origin.range.y\",defaultVal:0,range:[0,1e3]}]},{name:\"life span\",type:\"folder\",children:[{name:\"lifeSpanValue\",type:\"slider\",map:\"lifeSpan.value\",defaultVal:2,range:[.1,60]},{name:\"lifeSpanRange\",type:\"slider\",map:\"lifeSpan.range\",defaultVal:0,range:[0,50]}]},{name:\"velocityAngle\",type:\"folder\",children:[{name:\"angleValue\",type:\"slider\",map:\"velocityAngle.value\",defaultVal:.1,range:[0,359],step:1},{name:\"angleRange\",type:\"slider\",map:\"velocityAngle.range\",defaultVal:.1,range:[0,359],step:1}]},{name:\"speed\",type:\"folder\",children:[{name:\"speedValue\",type:\"slider\",map:\"speed.value\",defaultVal:1,range:[0,20],step:.1},{name:\"speedRange\",type:\"slider\",map:\"speed.range\",defaultVal:0,range:[0,20],step:.1}]},{name:\"acceleration\",type:\"slider\",range:[-.1,.1],defaultVal:.001,step:.01},{name:\"maxSpeed\",type:\"slider\",range:[0,50],defaultVal:30,step:.1},{name:\"turbulence\",type:\"folder\",children:[{name:\"tRate\",type:\"slider\",map:\"turbulence.rate\",defaultVal:.05,range:[0,.2],step:.01},{name:\"xAmplitude\",type:\"slider\",map:\"turbulence.xAmplitude\",defaultVal:.1,range:[0,10],step:.01},{name:\"yAmplitude\",type:\"slider\",map:\"turbulence.yAmplitude\",defaultVal:.1,range:[0,10],step:.01}]}]},function(e,t,n){\"use strict\";t.__esModule=!0,t.default=void 0;n(8);var r=function(e){return[{name:\"background\",type:\"folder\",children:[{name:\"bgType\",type:\"dropdown\",map:\"background.type\",defaultVal:\"none\",options:[\"none\",\"color\",\"image\"]},{name:\"bgColor\",type:\"color\",map:\"background.color\",defaultVal:\"#ff0000\"},{name:\"bgImage\",type:\"dropdown\",map:\"background.image\",defaultVal:\"\",options:e.images},{name:\"bgAlpha\",type:\"slider\",map:\"background.alpha\",range:[0,1],defaultVal:1}]},{name:\"clearCanvas\",type:\"boolean\",defaultVal:!0},{name:\"alpha\",type:\"folder\",children:[{name:\"alphaValue\",type:\"slider\",map:\"alpha.value\",defaultVal:.95,range:[0,1],step:.01},{name:\"alphaRange\",type:\"slider\",map:\"alpha.range\",defaultVal:.15,range:[0,1],step:.01}]},{name:\"transformOrigin\",type:\"folder\",children:[{name:\"originX\",type:\"slider\",map:\"transformOrigin.x\",defaultVal:.5,range:[-1,2],step:.01},{name:\"originY\",type:\"slider\",map:\"transformOrigin.y\",defaultVal:.5,range:[-1,2],step:.01}]},{name:\"scale\",type:\"folder\",children:[{name:\"scaleValue\",type:\"slider\",map:\"scale.value\",defaultVal:1.5,range:[0,10],step:.01},{name:\"scaleRange\",type:\"slider\",map:\"scale.range\",defaultVal:.15,range:[0,10],step:.01}]},{name:\"rotation\",type:\"folder\",children:[{name:\"rotationValue\",type:\"slider\",map:\"rotation.value\",defaultVal:0,range:[-360,360],step:1},{name:\"rotationRange\",type:\"slider\",map:\"rotation.range\",defaultVal:0,range:[0,360],step:1}]},{name:\"color\",type:\"folder\",children:[{name:\"colorValueR\",type:\"slider\",map:\"color.value.0\",defaultVal:255,range:[0,255],step:1},{name:\"colorValueG\",type:\"slider\",map:\"color.value.1\",defaultVal:100,range:[0,255],step:1},{name:\"colorValueB\",type:\"slider\",map:\"color.value.2\",defaultVal:100,range:[0,255],step:1},{name:\"colorRangeR\",type:\"slider\",map:\"color.range.0\",defaultVal:255,range:[0,255],step:1},{name:\"colorRangeG\",type:\"slider\",map:\"color.range.1\",defaultVal:100,range:[0,255],step:1},{name:\"colorRangeB\",type:\"slider\",map:\"color.range.2\",defaultVal:100,range:[0,255],step:1}]},{name:\"alphaAnimation\",type:\"folder\",children:[{name:\"alphaLoop\",type:\"boolean\",map:\"animations.alpha.loop\",defaultVal:!0},{name:\"alphaDuration\",type:\"text\",map:\"animations.alpha.duration\",defaultVal:\"max\"},{name:\"alphaSteps\",type:\"text\",map:\"animations.alpha.steps\",defaultVal:\"\"}]},{name:\"scaleAnimation\",type:\"folder\",children:[{name:\"scaleLoop\",type:\"boolean\",map:\"animations.scale.loop\",defaultVal:!0},{name:\"scaleDuration\",type:\"text\",map:\"animations.scale.duration\",defaultVal:\"max\"},{name:\"scaleSteps\",type:\"text\",map:\"animations.scale.steps\",defaultVal:\"\"}]},{name:\"rotationAnimation\",type:\"folder\",children:[{name:\"rotationLoop\",type:\"boolean\",map:\"animations.rotation.loop\",defaultVal:!0},{name:\"rotationDuration\",type:\"text\",map:\"animations.rotation.duration\",defaultVal:\"max\"},{name:\"rotationSteps\",type:\"text\",map:\"animations.rotation.steps\",defaultVal:\"\"}]}]};t.default=r},function(e,t,n){\"use strict\";t.__esModule=!0,t.getDefaultNewParticleModelData=t.getParticleModelAction=void 0;n(8);t.getParticleModelAction=function(e){return[{name:\"addParticleModel\",type:\"action\",defaultVal:function(){e.addParticleModel()}}]};t.getDefaultNewParticleModelData=function(e){var t=e.images;return function(n){return[{name:n+\"Type\",type:\"dropdown\",defaultVal:\"Circle\",options:[\"Image\",\"Circle\",\"Rect\",\"Sprite\"],modelKey:\"type\"},{name:n+\"ImageName\",type:\"dropdown\",defaultVal:t[0]||\"\",options:t,modelKey:\"image\"},{name:n+\"Width\",type:\"text\",defaultVal:10,min:0,modelKey:\"width\"},{name:n+\"Height\",type:\"text\",defaultVal:10,min:0,modelKey:\"height\"},{name:n+\"Probability\",type:\"slider\",range:[.1,50],defaultVal:1,min:.1,modelKey:\"probability\"},{name:n+\"Props\",type:\"text\",defaultVal:\"{}\",modelKey:\"properties\"},{name:n+\"SpriteSetting\",type:\"text\",defaultVal:{frameWidth:0,frameHeight:0,frameNumber:1,speed:.2,loop:!0},modelKey:\"spriteSetting\"},{name:n+\"Id\",type:\"text\",defaultVal:n,modelKey:\"id\"},{name:n+\"Delete\",type:\"action\",modelKey:null,defaultVal:function(){e.deleteParticleModel(n)}}]}}},function(e,t,n){\"use strict\";t.__esModule=!0,t.mergePath=t.parseAdSize=t.getAdPathFromUrl=t.getParamInQueryString=void 0;t.getParamInQueryString=function(e){e=e.replace(/[\\[]/,\"\\\\[\").replace(/[\\]]/,\"\\\\]\");var t=new RegExp(\"[\\\\?&]\"+e+\"=([^&#]*)\").exec(location.search);return null===t?null:decodeURIComponent(t[1].replace(/\\+/g,\" \"))};t.getAdPathFromUrl=function(){var e=window.location,t=e.origin,n=e.pathname;return r(t,\"1-build\",n)};t.parseAdSize=function(e){var t=/(\\d+)x(\\d+)/;if(t.test(e)){var n=t.exec(e);return{width:n[1],height:n[2]}}return null};var r=function(){for(var e=\"\",t=/\\/+$/g,n=/^\\/+|\\/+$/g,r=0;r<arguments.length;r++){var i=arguments[r];e+=(0===r?i.replace(t,\"\"):i.replace(n,\"\"))+\"/\"}return e=e.replace(t,\"\")};t.mergePath=r}]);"],"mappings":"AAAA","sourceRoot":""}